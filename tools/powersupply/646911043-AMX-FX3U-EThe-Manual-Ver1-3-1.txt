  Welcome to use amoxun programmable controller, for better use of PLC
  function please read this material carefully


Cover




   AMX-FX3U network port
    series programmable
          controller
                         User Manual




                              Rev: V1.3




                                             https://www.amsamotion.store
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



Foreword

                                  Foreword


Contents of the manual
     This manual describes the programming resources, functions and usage of
AMX-FX3U PLC products, such as PLC software component distribution, support
instructions, analog input and output, high-speed counter, high-speed pulse
output, ethernet, Modbus RTU communication, for the purchase of this product
for customers to provide reference.

Instructions
Before using PLC products, users should read and grasp the information of this
 PLC completely
The sample contents in the manual are only for users’reference and
     understanding. If in doubt, please contact the relevant technical personnel of
 imoxun
If the user will use this PLC with other products, please ensure that the relevant
     technical specifications

Contact
    If you have questions about the use of this PLC product, please contact the
agent, the sales staff, or contact us by telephone.

Http://amsamotion.com
Email: amx@amsamotion. Com
Telephone numbers: 4001-522-518 Dial 1(technical hotline) and 4001-522-518 Dial
 2(sales hotline)
Address: 1/F, Building B, Zhaoxuan Manufacturing Park, 9 Yizhan Road, Yuan Wu
 Bian, Dongguan City, Guangdong Province
Scan the QR code below for more product information on imoxun’s official public
 account
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Version history



                                 Version history



   Version   Revision date                       Revision notes                     Page number


   V1.0      2020.07.01                           Initial version                           -


   V1.1      July 6,2020            - add “Sensor wiring diagram”                    Page 15


   V1.2      August 27,2020         - change of name of PLC.                            -
                                    - correction of “Analog output position”text
                                    description                                       Page 16
                                    - correction of “Ethernet parameter
                                    settings”image content                            Page 41
                                    - partial layout layout layout layout, wiring
                                    diagram adjustment                                  -
                                    - add AMX-FX3U-26MT-E                               -

                                     - combined with new version and content
   V1.3      July 23,2021            optimization adjustments                           -




The text after “Rev:”on the cover of this user’s manual represents the
   document version
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




User Manual Guide

                                               User Manual Guide



       The content of this manual is structured as follows:

Chapter      Projects                                            Content description

             Product       This paper introduces the product naming and main features of AMX-FX3U Netcom
   1        Overview       Series PLC
             Product     Explain AMX-FX3U mesh Port Series PLC each model product specification and
  2        specification wiring definition
            Functional
  3          planning      Describes the main functions of various models of AMX-FX3U Netcom Series PLC
             Software
            component Describes the AMX-FX3U mesh port series PLC programming software components,
  4        specification high-speed counter distribution
                        The function and application of analog value of AMX-FX3U Net Port Series PLC are
  5        Analog usage introduced
          Communication Describes the communication function and application of AMX-FX3U network Port
  6          Guide      Series PLC
            Orientation
              control      Description AMX-FX3U network port series transistor output PLC positioning control
  7         instructions   related functions

  8         Appendix       Supported instructions, error code, analog case, version number description
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




                                                    Table of contents


Product Overview 1
    1.1 model naming convention 1
    1.2 models and major functions1
    1.3 product features 1

2. Product Specification 3
     2.1 main specification 3
     2.2 interface specification 4
          2.2.1 AMX-FX3U-26MR-E interface definition 4
          2.2.2 AMX-FX3U-26MT-E interface definition 6

Functional Planning 8

Software component specification 10
    4.1 software component allocation 10
    4.2 power off maintain address description 11
    4.4 high speed counter instruction 11
    4.3 special software components 12

Instructions for the use of analog quantities 16
     5.1 analog input 16
     5.2 analog output 17

Communications Guide 18
   6.1RS422 interface communication 18
   6.2RS485 interface communication 20
        6.2.1.485 communication using FX3U PLC 20
        6.2.2, PLC used as Modbus RTU main station communication 20
        6.2.3, PLC as Modbus RTU slave station communication 30
   6.3 Gateway Communications 41
        6.3.1, communication with Mitsubishi programming software (GX Works2 version)43
        Modbus TCP communication specification 44

Orientation control instructions
    7.1 positioning control features 53
    7.2 features 53
    7.3I/O point allocation 53
    7.4 list of related software components 54
    7.5 instructions 56
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

        7.5.1. Mechanical origin regression -- ZRN instruction 56
        7.5.2. Pulse output -- PLSY instruction 58
        7.5.3 variable speed pulse output-plsv instruction 60
        7.5.4. Pulse output with acceleration and deceleration -- PLSR instruction 62
        7.5.5. Relative positioning -- DRVI instruction 64
        7.5.6. Absolute positioning -- drva directive 67

Appendix A, AMX-FX3U Mesh Port Series PLC support instruction table 70

Appendix B, Modbus RTU communication error code (D8402 data) explanation 73

Appendix C, Application Part of the simulation case 77
   Appendix C-1. Analog Input 77
   Appendix C-2. Analog output 82

Appendix D, part of the touch screen/PC side network interface communication settings example 83

Appendix E, PLC version number view 110
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Product Overview
     AMX-FX3U-E is a new generation of high-speed, high-performance programmable controller
(PLC) which supports the communication between MC and MODBS TCP protocol RJ45.

1.1 model naming convention
     The basic unit models of the AMX-FX3U series of programmable controllers are generally as
     follows:




     The 1 and 2 of the model name components represent the following specifications
     1 io total points: 26
     2 output type: R stands for relay output (with contact, AC/DC load)
                     T represents transistor output (for contactless DC loads)

1.2 models and key features
                         Switchin                    Communi
                         g        Analog             cation                  High-speed
                         quantity quantity           port                    count
    FX3U compatible                                                                           High-speed
                                                               Mesh                             output
      Series model       输    输    输    输                     openin               AB
                                             422   485    232   g    Single phase phase
                         入    出    入    出
    AMX-FX3U-
    26MR-E               16   10   2    1     1      1    无       1    100K, Route                   No
                                                                            4,
                                                                                   Route 2
    AMX-FX3U-26MT-                                                     Route 2,40K             Route 2
    E              16         10   2    1     1      1    无       1
                                                                                                 100K

1.3 product features
Main features

    The MCU adopts ARM32-bit industrial processor and is suitable for small PLC in industrial
        automation application

    Mitsubishi FX3U most of the instructions, support GX Works2/GX Developer programming;
        with its own independent programming port

    All IO port with photoelectric isolation transmission signal, effective filtering all kinds of
         interference, input support positive/negative trigger, easy to use

    1 way 10/100Mbps network port, support MC and Modbus TCP protocol communication

    High-speed counter function

    Support 2-way 100K high-speed pulse output

    With analog input and output channels

    The power supply circuit adopts anti-reverse connection and anti-surge design




                                                                                    1
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

    All key electronic components are imported big brand, quality assurance for 3 years

    It is widely used in signal acquisition and control of industrial field equipment


The basic function of enrichment
1. Basic Instruction Speed: 0.18 US/step, Instruction Execution Speed
Fast 2, program capacity: Program Memory Size is 0 ~ 16000 steps,
has a more complete basic/application instructions 3, with the clock
calendar, RUN/Stop Switch, a/d, D/A, firmware upgrades and other
powerful functions 4, DIN rail installation, easy maintenance


Extensive communication capabilities
1. The programming port is the s terminal of standard RS422. Besides, the programming
port can communicate with touch screen which supports FX3U PLC. 2. It has its own
RS485 communication port, supports Modbus RTU communication protocol, and
supports touch screen communication of FX3U PLC

3. Bring 1 RJ45 net port, support Modbus TCP communication protocol, and support Mitsubishi GX
Works2 programming software to use net port to communicate with PLC.


High-speed counter function
1.6 channels (x 0 ~ x 5) single-phase high-speed pulse counting, 2 channels AB phase counting, 4
channels (x 0 ~ x 3)100K single-phase counting, 2 channels (x 4 ~ x 5)40K pulse counting


Pulse output function
1. ETH-AMX-FX3U-26MT supports two (y 0 ~ y 1)100K high-speed pulse output
2
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Product specification
2.1 major specifications
  Model number             AMX-FX3U-26MR-E                                 AMX-FX3U-26MT-E
   Digital input
 Number of input
      points                                                 16
 Input signal type      Switch contact signal or level signal, support positive and negative trigger
Input signal voltage                                   DC 18 ~ 28V
                                                       Optocoupler
  Insulation Loop                                       isolation
 Digital output
Number of output
    points                                                   10
  Output type                     Relay                                        NPN transistor
                       2a/point; 8A/4 point; 12A/6
 Output Capacity                  point                              0.5 A/point; 2A/4 point; 3A/6 point
 Insulation Loop          Mechanical insulation                             Optocoupler isolation
  Analog input
 Number of input
     points                                                   2
   Input type                     Voltage/current, DIP switch switch switch input type
                                                      0 ~ 10V/0 ~
   Input Range                                           20ma
   Conversion
     accuracy                                              12 bits
 Analog output
Number of output
    points                                                   1
  Output type                                         Voltage, current
                                                       0 ~ 10V/0 ~
  Output Range                                             20ma
   Conversion
    accuracy                                               12 bits
High-speed counter
  Number of input
       points                 Six channels (x 0 ~ x 5) single phase, two channels AB phase
  Pulse frequency             Single-phase 4-way 100K (x 0 ~ x 3) , 2-way 40K (x 4 ~ x 5)
Input signal voltage                                   DC 18 ~ 28V
 High-speed pulse
       output
 Number of output
       points                                                                Route 2(y 0 ~ y 1)
                       No high-speed pulse output
  Pulse frequency                                                             100K per route
 Communication
   interface
                                                Route 1
RS485
                        Support Modbus RTU, FX3U PLC communication protocol
RS422                             Route 1, support download, monitor
        1 way, 10/100Mbps communication rate, support Modbus TCP, Mitsubishi FX3U built-in
RJ45    TCP/IP protocol




                                                                                             3
Dongguan AMX Automation Technology                     AMX-FX3U net port series programmable
Co. , Ltd.                                             controller manual


  Power supply
                                     DC24V, terminal access; with anti-reverse
   Power Supply                                    protection
Power consumption                                  2W ~ 4W
  Surge protection                                $6 million
   Structure and
    environment
     Size (mm)                                  129 * 86 * 50
 Installation Mode                             35mm DIN rail
   Operating                         Working temperature 0 °C ~ + 50 °C (no
  temperature                                     freezing)
Working humidity                        10 ~ 80% Rh (no condensation)


2.2 interface specification
2.2.1 AMX-FX3U-26MR-E interface definition
4
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    Terminal                                                                  Function
      label            Function description            Terminal              descriptio
      24 +         DC 24V Power Positive Pole            label                    n
                                                                   Common terminal of 1 ~ 4 digital
      0V       DC 24V power supply negative pole
                                                       COM0               output channels
     A-plus    485A + (see Chapter 6.2 for features)
                                                       Y zero     Number One - way digital output
    B minus    485B-(see Chapter 6.2 for features)
                                                         Y1                   2 - way digital output
               Common end of 1-16 digital input
                                                         Y2                   3 - way digital output
      S/s                  channel
      X0            Channel 1 digital input              Y3                   4 - way digital output
                                                                  Digital output common terminal of 5
      X1              Channel 2 digital input
                                                       COM1                   ~ 10 channels
      X2              Channel 3 digital input
                                                        Y4                    5 - way digital output
      X3              Channel 4 digital input
                                                         Y-5                  6 - way digital output
      X4              Channel 5 digital input
                                                         Y6                   7 - way digital output
      X5              Channel 6 digital input
                                                         Y7              No. 8 - way digital output
      X6               Number seven input
                                                         Y10                  9 - way digital output
      X7               Route 8 digital input
                                                         Y11              10th digital output
      X10              Route 9 digital input                                   1 voltage/current
      X 11              10th digital input              SW1       Analog input switching code
      X-12            Route 11 digital input                                   2 voltage/current
                                                        SW2       Analog input switching code
      X13            Channel 12 digital input
                                                       COM3                   Analog input
      X14             Route 13 digital input
                                                                  The first analog voltage is 0 ~ 10V/0
      X 15            Route 14 digital input
                                                                                 ~ 20ma
                                                         In1
      X16             Route 15 digital input                                     Current
      X17             Route 16 digital input                                       input
                                                                    The second analog voltage is 0 ~
                                                                            10V/0 ~ 20ma
                                                         In2
                                                                                Current
                                                                                 input
                                                       COM4                  Analog output
                                                                    Analog 0 ~ 10V voltage output
                                                          V                     channel
                                                                  Analog current output channel of 0 ~
                                                          I                       20ma
                                                        RS422     RS422 programming port, S terminal
                                                                  10/100Mbps network port, RJ45 bus
                                                         Eth                      block
                                                                  Error indicator, PLC error when the
                                                         Sys.                  Red Light
                                                                           Run Indicator:
                                                         Run      The PLC runs with a green light and
                                                                        stops with a red light
                                                       COMM RS485 communication light, flashing
when communicating




                     5
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan

2.2.2 AMX-FX3U-26MT-E interface definition




                                                                                            6
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    Terminal                                                              Function
      label           Function description         Terminal              descriptio
      24 +        DC 24V Power Positive Pole         label                    n
                                                               Common terminal of 1 ~ 4 digital
      0V       DC 24V power supply negative pole
                                                   COM0               output channels
     A-plus                  485a +
                                                   Y zero     Number One - way digital output
    B minus                485b -
                                                     Y1                   2 - way digital output
                Common end of 1-16 digital input
                                                     Y2                   3 - way digital output
      S/s                 channel
      X0           Channel 1 digital input           Y3                   4 - way digital output
                                                              Digital output common terminal of 5
      X1             Channel 2 digital input
                                                   COM1                   ~ 10 channels
      X2             Channel 3 digital input
                                                    Y4                    5 - way digital output
      X3             Channel 4 digital input
                                                     Y-5                  6 - way digital output
      X4             Channel 5 digital input
                                                     Y6                   7 - way digital output
      X5             Channel 6 digital input
                                                     Y7              No. 8 - way digital output
      X6              Number seven input
                                                     Y10                  9 - way digital output
      X7              Route 8 digital input
                                                     Y11              10th digital output
      X10             Route 9 digital input                                1 voltage/current
      X 11             10th digital input           SW1       Analog input switching code
      X-12           Route 11 digital input                                2 voltage/current
                                                    SW2       Analog input switching code
      X13           Channel 12 digital input
                                                   COM3                   Analog input
      X14            Route 13 digital input
                                                              The first analog voltage is 0 ~ 10V/0
      X 15           Route 14 digital input
                                                                             ~ 20ma
                                                     In1
      X16            Route 15 digital input                                  Current
      X17            Route 16 digital input                                    input
                                                                The second analog voltage is 0 ~
                                                                        10V/0 ~ 20ma
                                                     In2
                                                                            Current
                                                                             input
                                                   COM4                  Analog output
                                                                Analog 0 ~ 10V voltage output
                                                      V                     channel
                                                              Analog current output channel of 0 ~
                                                      I                       20ma
                                                    RS422     RS422 programming port, S terminal
                                                              10/100Mbps network port, RJ45 bus
                                                     Eth                      block
                                                              Error indicator, PLC error when the
                                                     Sys.                  Red Light
                                                                       Run Indicator:
                                                     Run      The PLC runs with a green light and
                                                                    stops with a red light
                                                   COMM RS485 communication light, flashing
when communicating




                     7
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Function Planning
     AMX-FX3U mesh port series of different models of PLC function planning information as
     shown in table 3 below.


       Function name                                               Function description
                              16-point photoelectric isolation digital input, 10-point relay output, do not support
                 Io count     extended IO points
    Io         High-speed
configurat       counter      4 single-phase (x 0 ~ x 3)100K pulse counting, 2 single-phase (x 4 ~ x 5)40K pulse
   ion         (hardware)     counting;
                              Two-way AB phase (x 0, X 1 for 1 way, X 3, X 4 for 1 Way) counting
   User      Program capacity 0-16K
programm
   ing         Annotation
 Capacity       capacity      $0-$31
              File register
                capacity      The file register is not supported. The default is 0 block
             Communication
                  port        1-way asynchronous serial port: RS422(s terminal) , RS485, RJ45 interface
             Communication    Built-in TCP/IP protocol for FX3U PLC, Modbus RTU, Modbus TCP, Mitsubishi
                protocol      FX
                              Programming port: RS422
Communi       Programming
 cation          mode      Programming Cable: USB to RS422 S terminal cable (USB-SC09-FX cable)
function                   Programming software: support GX-Works2/Gx-Developer to achieve the download
                           and monitoring debugging
                           The equipment or upper computer which includes RS422, RS485 serial port and
                           supports FX3U PLC protocol can communicate with this PLC
               Equipment   The equipment or host computer with RS485 serial port and supporting Modbus
             Communication RTU protocol can communicate with this PLC
                           The equipment or host computer which contains RJ45 network port and supports
                           Modbus TCP and MC protocol can communicate with this PLC
               Number of
                channels   Route 2
 Analog
 quantity  Input Range        0 ~ 10V or 0 ~ 20ma current
Inputting Switching mode      2-WAY DIP switch switching voltage/current
            Conversion
             accuracy         12-bit resolution
            Number of
 Analog      channels         Route 1
 quantity
           Output Range       0 ~ 10V or 0 ~ 20ma current
  Output
            Conversion
             accuracy     12-bit resolution
                          The RUN/SOTP dial switch is used to control the stop of the PLC, and the green
                          light shows that the PLC is in working mode
             RUN/stop
                          Light on PLC in stop mode
  Other False indication When the PLC operation error, the error light red light
functions                 Support, Save Range See section 4.1, can not be modified through the software
          Power down save power-down range
              Clock       Support, button battery power in case of power failure
Firmware
 upgrade   Support

                 Table 3.1 AMX-FX3U-26MR-E feature list




                                                          8
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



       Function name                                               Function description
                              16-point photoelectric isolation digital input, 10-point relay output, do not support
                 Io count     extended IO points
    Io         High-speed
configurat       counter        Line single phase (x 0 ~ x 3)100K pulse count, 2 line single phase (x 4 ~ x 5)40K
   ion         (hardware)     4 pulse count;
                              2 Path AB phase (x 0, X 1 is 1 path, X 3, X 4 is 1 path) count
             High-speed pulse
                  output      2 - channel pulse output (y 0 ~ y 1) at 100K per channel
   User      Program capacity 0-16K
programm
   ing         Annotation
                capacity      0 $31
 Capacity
              File register
                capacity      The file register is not supported. The default is 0 block
             Communication
                  port        1 Channel asynchronous serial port: RS422(s terminal) , RS485, RJ45 interface
             Communication    Built-in TCP/IP protocol for FX3U PLC, Modbus RTU, Modbus TCP, Mitsubishi
                protocol      FX
                              Programming port: RS422
Communi       Programming
 cation          mode      Programming Cable: USB to RS422 S terminal cable (USB-SC09-FX cable)
function                   Programming software: support GX-Works2/Gx-Developer to achieve the download
                           and monitoring debugging
                           The equipment or upper computer which includes RS422, RS485 serial port and
                           supports FX3U PLC protocol can communicate with this PLC
               Equipment   The equipment or host computer with RS485 serial port and supporting Modbus
             Communication RTU protocol can communicate with this PLC
                           The equipment or host computer which contains RJ45 network port and supports
                           Modbus TCP and MC protocol can communicate with this PLC
               Number of
                channels   2路
 Analog
 quantity  Input Range        0 ~ 10V or 0 ~ 20ma current
Inputting Switching mode      2 Circuit DIP switch switching voltage/current
            Conversion
             accuracy         12-bit resolution
            Number of
 Analog      channels         1 路
 quantity
           Output Range       0 ~ 10V or 0 ~ 20ma current
  Output
            Conversion
             accuracy     12-bit resolution
                          The RUN/SOTP dial switch is used to control the stop of the PLC, and the green
                          light shows that the PLC is in working mode
             RUN/stop
                          Light on PLC in stop mode
  Other False indication When the PLC operation error, the error light red light
functions                 Support, Save Range See section 4.1, can not be modified through the software
          Power down save power-down range
               Clock      Support, button battery power in case of power failure
             Firmware
              upgrade     Support

                                      Table 3.2 AMX-FX3U-26MT-E feature list
、




    9
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Software component specification
4.1 software component allocation
       The types of software components supported by the AMX-FX3U series of programmable
       controllers are illustrated in the following table:
Serial
numbe
  r     Soft element                                          Function description
  1    Enter Relay X The bits corresponding to the digital input of PLC are addressed in octal number
       Output Relay
  2           Y      The bits corresponding to the digital output of PLC are addressed in octal number
         Auxiliary
  3      Relay M Auxiliary relay bit element in PLC.
                     The utility model is mainly used for the programming of sequence function diagrams, and
  4 Status Relay S is used as a bit element of state mark for step control
  5       Timer T    16bit timer with 1MS, 10ms and 100ms clock pulses
                     Support 16bit/32bit increment/decrement count, high speed count, single/double phase
  6      Counter C count
       Data Register
  7           D      Supports register D for holding data; Index Register V, Z
  8       Pointer    Jump Pointer P, subroutine pointer P (interrupt pointer not supported)
  9     Constant K ·H Support binary, decimal, hexadecimal, floating-point data operations

   Software
  component
   category                  AMX-FX3U-26MR-E                                      AMX-FX3U-26MT-E
 Enter Relay X                                     X 0 ~ x 17, that’s 16 points
Output Relay Y                                      Y-o-y-11, that’s 10 points

                         M0 ~                   M512 ~                                            M8000 ~
                         M511                   M1023                M1024 ~ M7696                M8424
Auxiliary Relay
      M                   512                     512                       512                  425 points
                                                                                                  Special
                                                   *1                                             purpose
 Status Relay S                              S 0 ~ s 4095, total 4096 points, general
                                       T200 ~ T245                  T246 ~ T2455                  T256 ~ T511
                                                                          Ten
      Timer T        T0 ~ T199           46 points                      o’clock                     256 points
                                                                   10ms cumulative
                    200.100 MS             10 MS                         type                          1ms
                     General              General
                     Purpose              Purpose                         *1                    General Purpose
                                      16-bit
                                    increment                       32 bit bidirectional     32-bit bidirectional
                                      count                               counter            high-speed counter
                                                C100 ~                     C200 ~
      Counter          C0 ~ C99                  C199                       C234                C235 ~ C255
         C               100                      100                   Thirty-five                 28
                       General                                        General               General
                       Purpose                  *1                    Purpose               Purpose
                                                          D951 ~                        V 0 ~ V 7, Z 0 ~ Z
                   D0 ~ D499         D500 ~ D950          D7999       D8000 ~ D8483               7
                                                                                        16 o’clock change
Data Register D    500 points          951 points          7,049        484 points           of address
                    General                               General         Special
                    Purpose               *1              Purpose         purpose        General Purpose
                                                                   P 0 ~ p 127,128 points, branching
    Pointer              N-0-n-7,8:00, co-dominant                              pointer
           K                16-32768 ~ 32767                      32-digit-2147483648 ~ 2147483647
 Const                            16 bit 0 ~
 ant       H                     FFFFFF H                               32 bit FFFFFFFFH
                                     ±1.175495e-38 ~ ±3.402823E + 38(significant
           E                         position 7)

* 1. The version number starts with 1(e. g. 10101) of the PLC to maintain the power-down address range




                                                                                                         Te
                                                                                                         n
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

4.2 keep address instructions for power down
    AMX-FX3U PLC power-down storage address range see table 4.2, if you want to adjust the
default latch start, end range, can be programmed with software-PLC parameters-software
components set window to set, then the new PLC parameters will be downloaded to the PLC
effective.
                     Default latch start address Default latch end address Maximum latching
                           (adjustable)                (adjustable)             range
          Auxiliary Relay M             M500                          M1023                M0 ~ M1023
            Status Relay S              S500                           S999                 S 0 ~ s 999
               Timer T         T246(fixed, not adjustable) T255(fixed, not adjustable)     T246 ~ T255
                       16 bits          C100                           C199                 C0 ~ C199
          Counter C
                       32 bits          C220                           C255                C200 ~ C255
           Data Register D              D200                           D511                 D0 ~ D511
                                          Table PLC power down to save address
                                          4.2      range
* 1. If the version number begins with 1(E. G. 10101) , the power off address range of the PLC shall be as
described in section 4.1.

4.4 high speed counter instructions
    AMX-FX3U series programmable controller supports 4 single-phase (x 0 ~ x 3)100K pulse
counting, 2 single-phase (x 4 ~ x 5)40K pulse counting; Support 2-way AB phase (x 0, X 1 for 1 way,
X 3, X 4 for 1 Way) , the count for the hardware count, do not support the software count, high-
speed counter description as follows table:
                                1 phase 1 count                        1 phase 2 count
                                     input                                  input
          C235 C236 C237 C238 C239 C240 C241 C242 C243 C244 C245 C246 C247 C248 C249 C250
       X0 U/d                               U/d         U/d       U     U           U
       X1       U/d                          R           R        D     D           D
        X2                U/d                                        U/d              U/d          R         R
        X3                          U/d                               R                R                U          U
        X4                                    U/d                          U/d                          D          D
        X5                                              U/d                 R                           R          R
        X6                                                                       S                           S
        X7                                                                              S                          S
                                    U: Upper Count; D: Lower Count; R: Reset; S: START

                                                        Two phase two count input
            C251 C252 C253 C254 C255                                                 Account for
         X0  A    A         A
         X1  B    B         B
                                                              C251 positive count, M8251 off, reverse count, M8251 on
         X2           R                   R
                                                               When C252 counts forward, M8252 disconnects. When
                                                                        counting backward, M8252 turns on
         X3                     A                   A
                                                               When C253 counts forward, M8253 disconnects. When
                                                                        counting backward, M8253 turns on
         X4                     B                   B          When C254 counts forward, M8254 disconnects. When
         X5                     R                   R
                                  counting backward, M8254 turns on
                           When C255 counts forward, M8255 disconnects. When
                                  counting backward, M8255 turns on
X6            S
X7                  S
     A: Phase A; B: Phase B; R: Reset; S: Start; A: phase a input; B: Phase B input



                                                                                      11
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


    The auxiliary relay is used to change the increasing and decreasing direction of the high-speed
counter. When the state is OFF, the high-speed counter is counted.
                                      Counting                      Counting
                              Counter direction             Counter direction
                               Serial Switching              Serial Switching
                              number   address              number   address
                               C235    M8235                 C241    M8241
                               C236    M8236                 C242    M8242
                               C237    M8237                 C243    M8243
                               C238    M8238                 C244    M8244
                               C239    M8239                 C245    M8245
                               C240    M8240

4.3 special software components
     The types of software components supported by the AMX-FX3U series of programmable
     controllers are illustrated in the following table:
 Special                                                   Special
assistance                                                  data
           Functiona                                      Register Functiona
 Relay M l type                    Functional description D          l type              Functional description
                     Run Center 1, Clear 0 when
 M8000               stopped                               D8000             Retentions
                                                                             The model version FX3U
                                                            Delta            (C)(D8101 is also available
 M8001        PLC. Clear 0 on run, 1 on stop                8001             Save) , PC type and version
                                                                      PLC. number
            Status
                     Initiating Pulse (first scan           Delta            Memory capacity (D8102 also
 M8002               engaged)                               8002    Status saved)
                                                            Delta
 M8003               Initial pulse (first scan disengaged) 8003              Memory type, register type
                                                                             Error m address number BCD
 M8011               10 Ms Pulse                           D8004             conversion value
                                                            Delta
 M8012               100 ms pulse                           8010             Scan current value
                                                            Delta
 M8013               1s pulse                               8013             Corresponding second
            System                                          Delta
 M8014       clock One minute pulse                         8014             Corresponding minutes
                     1 means the clock is stopped, 0        Delta
 M8015               means the clock is running             8015             Corresponding Hour
                     1 indicates that the clock is                  System
                     running normally;                      Delta    clock
 M8018                                                      8016             Corresponding date
                     Zero means stop
                                                          Delta
 M8020              Zero mark                             8017              Corresponding month
                                                          Delta
 M8021              Borrow sign                           8018              Corresponding year
                                                          Delta
 M8022              Carry flag                            8019              Corresponding Week
                                                                   Input Filter, X010-X017 input
                                                                   The initial value of the filter is
                                                                   transmitted to the special data post
                                               Delta   Inputting
M8029               Command complete           8020                Memory D8020
                                                                   The filter of x 0 ~ x 7 can be set
        Signs and                                       Filter     by REFF instruction
          Hint                                                     Set, in MS
                    Master station Modbus      Delta
M8063               communication error lock   8028             The contents of the Z 0(Z) register
                                               Delta    Index The contents of the VO (V)
M8064               Parameter error            8029    content register
                                               Delta   Analog
M8065               Syntax Error               8030    quantity AD0 channel
                                                         A/D
                                               Delta    Input
M8067               Arithmetic error           8031     Value AD1 channel


                                                                                                        12
                                                              AMX-FX3U net port series programmable
Dongguan AMX Automation Technology Co. , Ltd.                 controller manual

                                                                             Arithmetic error, error code
                                                                             sequence number (corresponding
                   Y-0 pulse output stopped              Delta               to
  M8145            immediately                           8067        Error
                                                                    record M8067)
          Pulse Y 1 pulse output stopped                 Delta
  M8146  output immediately                              8068                Save error PC step
                   Monitoring of the Y 0 pulse output    Delta
  M8147 Start stop                                       8080
                   Busy/READY                                      D/a value Analog output value setting
                   Monitoring in the Y01 pulse                               The model version FX2N
                   output                                Delta               (C)(D8001 is also available
  M8148                                                  8101
                   Busy/READY (PLSY)                                         Save)
                   C235 plus minus counter control       Delta               Memory capacity (D8002 also
  M8235            bit                                   8102                saved)
                                                                     PLC Hardware version number +
                                                                    status software version number (5-bit 10
                                                                             Hexadecimal, the first two
                                                                             represent the hardware version,
                   C236 plus minus counter control       Delta               after
  M8236            bit                                   8105                3 bits represent software versions,
                                                                             such as 10101
                                                                             V1.0 software version V1.01)
                                                         Delta
                   C237 add-subtract count control       8140                 Total number of pulses output to
  M8237            bit                                   Low                  Y0
                                                        position             (FNC59(PLSR) FNC57(PLSY)
                                                                             instruction
                                                         Delta
                   C238 plus-minus counter control       8141
  M8238            bit                                   High                The total number of output pulses
                                                        position
                                                         Delta
                  C239 add-subtract counter control      8142                 Total number of pulses output to
  M8239     High- bit                                                         Y1
            speed                                        Low
                                                                             (FNC59(PLSR) FNC57(PLSY)
            count                                       position
                                                                             instruction
          Direction C240 plus minus counter control      Delta
  M8240    control bit                                   8143           The total number of output pulses
                                                         High     Pulse
                                                        position output
                                                         Delta Quantity
                   C241 plus minus counter control       8144    record Total number of pulses output to
  M8241            bit                                   Low            Y02
                                                        position        (FNC59(PLSR) FNC57(PLSY)
                                                                        instruction
                                                         Delta
                   C242 plus minus counter control       8145
  M8242            bit                                   High           The total number of output pulses
                                                        position
                                                         Delta
                   C243 plus-minus counter control       8146           Total number of pulses output to
  M8243            bit                                   Low            Y03
                                                        position        (FNC59(PLSR) FNC57(PLSY)
                                                                        instruction
                                                         Delta
                   C244 plus-minus counter control       8147
  M8244            bit                                   High           The total number of output pulses
                                                       position
                 C245 plus minus counter control        Delta
M8245            bit                                    8182               The contents of the Z 1 register
                                                        Delta
M8251            C251 plus minus count status bit       8183               The contents of the V1 register
       High-                                            Delta
M8252  speed C252 plus minus count status bit           8184               The contents of the Z 2 register
       count                                            Delta
M8253 Direction C253 plus-minus count status bit        8185               The contents of the V2 register
      monitorin
          g                                             Delta
M8254           C254 plus minus count status bit        8186               The contents of the Z 3 register
                                                        Delta
M8255            C255 plus minus count status bit       8187               The contents of the V3 register
                 Abnormal end of instruction            Delta     Change
M8329            execution flag bit                     8188      address The contents of the Z 4 register
                 Monitoring pulse output on Y-0         Delta     Content
M8340                                                   8189              The contents of the V4 register
                 On: Busy/Off: Ready
                 Y 0 clear signal output function is    Delta
M8341            effective (zrn)                        8190               The contents of the Z 5 register
                 Y 0 specifies the direction of the
                 origin regression                      Delta
M8342                                                   8191               The contents of the V5 register
                 (unsupported)
                                                        Delta
M8343            Y 0 positive limit                     8192               The contents of the Z 6 register
                                                        Delta
M8344            Y 0 reverse limit                      8193               The contents of the V6 register



                                                                                                              13
                                                                   AMX-FX3U net port series programmable
Dongguan AMX Automation Technology Co. , Ltd.                      controller manual

                    Y
                    ze
                    ro Closer. Dog, logic inversion
                                                           Delta      Change
  M8345             (unsupported)                          8194       address The contents of the Z 7 register
                    Y
                    ze
                    ro Logic inversion of zero signal      Delta      Content
  M8346                                                    8195                   The contents of the V7 register
                    (unsupported)
                    Y
                    ze                                                       RS485 function configuration
                    ro Interrupt logic reversal            Delta      Modbus register, 1 for
  M8347                                                    8200      Communi
                    (unsupported)                                     cation Modbus master, 2 is the slave
                    Y
                    ze                                     Delta                  Y 0 current value register, D8340
  M8348             ro Locating Command Drive              8340                   low
                    Y
                    ze                                     Delta
  M8349             ro Pulse output stop instruction       8341                   Bit, D8341 is high
                    Y
                    1 Monitor the pulse output             Delta
  M8350                                                    8342                   Y 0 base velocity initial value: 0
                    On: Busy/Off: Ready
            Pulse
          monitorin Y Clear signal output function         Delta
  M8351       g      1 effective                           8343
            And                                                                   Y-0, top speed
          positionin Y Specifies the direction of origin   Delta
  M8352       g      1 regression (unsupported)            8344
                     Y                                     Delta                  Initial value of Y 0 acceleration
  M8353              1 Positive limit                      8348                   time
                     Y                                     Delta                  Initial value of Y 0 deceleration
  M8354              1 Reverse limit                       8349                   time
                     Y Close DOG signal logic
                     1 inversion (not yet                  Delta                  Y01 current value register, D8350
  M8355              Support)                              8350                   is low
                                                                                  Bit, D8351 is high
                     Y NULL signal logic inversion         Delta     Kinematic
  M8356              1 (not supported)                     8351      positionin
                     Y                                                   g
                     1 Interrupt logic reversal            Delta
  M8357                                                    8352                   Y01 base velocity initial value: 0
                     (unsupported)
                     Y                                     Delta
  M8358              1 Locating Command Drive              8353
                                                                                  Y01, top speed
                     Y                                     Delta
  M8359              1 Pulse output stop instruction       8354
                                                           Delta
  M8401             In Modbus communication                8358                   Y01, initial acceleration time
                    An error occurred in the Modbus        Delta
  M8402             communication                          8359                   Y01, initial deceleration time
                    Error lock for Modbus                  Delta                  Y 0, the number of steps in a
  M8403             communication                          8380                   circle
                                                           Delta
  M8408             Retry occurs                           8381                   Y 0 step drive subdivision
          Modbus
                                                       Delta             Y 1, the number of steps in a
M8409              Time-out occurred                   8382              circle
        Communi Flag bit for Modbus
          cation communication parameter setting,      Delta
M8411              The PLC will stay on when it’s      8383              Y 1 step drive subdivision
                   powered up
                   An error occurred in the Modbus     Delta             Master Station Communication
M8422              communication                       8400              Format
                   Error lock for Modbus               Delta             Master station communication
M8423              communication                       8402              error code
                   When only receive mode (offline     Delta
M8424              state)                              8403              The details of the master error
          Pulse Y The function specified by the
        monitorin ze reset signal soft component is    Delta             A communication error occurred
M8464       g      ro valid                            8404              at the main station
           And        The function specified by the
        positionin Y reset signal soft component is    Delta             Display communication
M8465       g      1 valid                             8405              parameters (master station)
                   Configure Modbus 485 slave
Delta              mode, line                          Delta   MDOB Step number in communication
8480               Circle corresponding to the         8407    US   (master station)
                   number of points and register               Communi
                   address                                      cation
                   Configure Modbus 485 slave
Delta              mode                                Delta
8481               The number of points and register   8408              Current number of retries (master)
                   address of the input discrete
         Modbus quantity
          RTU
          slave Configure Modbus 485 slave
Delta                                                  Delta
         station mode
8482                                                   8409              Slave response timeout (master)
                   Number of incoming registers and
                   starting address
                   Configure Modbus 485 slave          Delta
Delta              mode to protect                     8410              Play delay (main station)
8483
                   The number of registers held and    Delta             Inter request delay (inter frame
                   the starting address                8411              delay)(master station)



                                                                                                            14
                                                        AMX-FX3U net port series programmable
Dongguan AMX Automation Technology Co. , Ltd.           controller manual



                                                Delta               Master Station Communication
                                                8400                Format
                                                Delta               Master station communication
                                                8402                error code
                                                Delta
                                                8403                The details of the master error
                                                Delta               A communication error occurred
                                                8404                at the main station
                                                Delta               Display communication
                                                8405                parameters (master station)
                                                Delta               Step number in communication
                                                8407                (master station)
                                                Delta
                                                8408                Current number of retries (master)
                                                Delta
                                                8409                Slave response timeout (master)
                                                Delta
                                                8410                Play delay (main station)
                                                Delta               Inter request delay (inter frame
                                                8411                delay)(master station)
                                                Delta     MDOBU
                                                8412         S    Number of retries (master)
                                                          Communi
                                                Delta      cation
                                                8414              Site No. (0-247)(main site)
                                                Delta             Action mode display (main
                                                8419              station)
                                                Delta
                                                8420                Slave communication format
                                                Delta
                                                8422                Error code from the station
                                                Delta               Details of what went wrong from
                                                8423                the station
                                                Delta               Display communication
                                                8425                parameters from slave station
                                                Delta               Inter request delay (inter frame
                                                8431                delay)
                                                Delta
                                                8434                Site No. (0-247)
                                                Delta               Serial communication error code
                                                8438                (slave)
                                                Delta
                                                8439                Slave action mode display
                                                                    High Byte: IP address segment 1,
                                                Delta               low byte IP address
                                                8470
                                                                    Address segment 2
                                                                    High Byte: IP address segment 3,
                                                Delta               low byte IP ground
                                                8471
                                                                    Address segment 4
                                                Delta               high Byte: MAC address side 1,
                                                8472                low byte:
                MAC address end 2
                High Byte: MAC address end 3,
Delta           low byte:
8473
         Modbus MAC address end 4
          TCP
Delta   communi High Byte: MAC address end 5,
8474     cation low byte:
                MAC address Terminal 6
                Number of first 4 connections of
Delta           high byte, 12 lower
8475
                Bit error code
Delta           Coil status, pointing to digital
8476            output
Delta           Input discrete signal pointing to
8477            digital input
Delta
8478             Input Register configuration
Delta
8479             Keep Register configuration




                                                    15
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Instructions for the use of analog quantities
5.1 analog input
    AMX-FX3U-26/T-E programmable controller includes two analog input channels, according to
the two DIP code beside the channel to switch voltage/current input, support “0 ~ 10V/0 ~
20ma”analog input.




         The analog input terminals are described in the following table:
                      AMX-FX3U-26/T-E analog input (2-way) terminal description
Seri
  al
num Terminal             Function
 ber name                description        Notes
                 Analog      Voltage/current switch, default voltage input, DIP code OFF for voltage, ON for
 1        SW1    Channel 1 current;
                 Analog
 2        SW2    Channel 2 Voltage/current switching, dial up when OFF, dial down when ON
 IN1 first analog voltage/current input, Analog range 0 ~ 10V/0 ~ 20ma
 IN2 analog voltage/current input with 2nd circuit, Analog Range 0 ~ 10V/0 ~ 20ma
                     Analog input
 5COM3               common land



Description of 2-channel analog input data conversion
Serial
numbe          Parametric         Detailed
  r          characteristic      description    Notes
              Corresponding
     1        AD value            0 ~ 2047      Analog Input PLC converted to decimal data
              IN1 channel
             corresponding
     2          register         Delta 8030
              IN2 channel
             corresponding
     3          register         Delta 8031
Note: The dotted line connection shows that the second analog input channel is the same, but a sensor can
only select one of the channels to input analog signals.


                                                                                                       16
Dongguan AMX Automation Technology Co. ,                     AMX-FX3U net port series programmable
Ltd.                                                         controller manual



    PLC analog input signal measurement type is by analog input    Depending on the state, the
    channel side                                                             following table:


                 Dial switch position                                      Analog input range
                                                    Dial State
         Dial IN1 on the left, IN2 on the right                          In1               In2

                                                    Even OFF           0 ~ 10V           0 ~ 10V


                                                  Left ON right
                                                       OFF            0 ~ 20 Ma          0 ~ 10V


                                                  Left OFF right
                                                       ON              0 ~ 10V          0 ~ 20 Ma



                                                     Both ON          0 ~ 20 Ma         0 ~ 20 Ma




    See Appendix C-1, Case 1-4.

5.2 analog output
    AMX-FX3U-26/T-E supports “0 ~ 10V/0 ~ 20ma”two analog output types, but one analog
    output.
17
                                                                   AMX-FX3U net port series programmable
Dongguan AMX Automation Technology Co. , Ltd.                              controller manual
        The analog output terminals are described in the
        following table:

                       AMX-FX3U-26/T-E analog output (1-way) terminal description
Seria
  l
num        Terminal
 ber        name                     Function description                               Notes
                                                                             Both channels can be used
                                1-way 0 ~ 10V analog voltage              simultaneously, but are subject to
  1            V                           output                                     the same
                                1-way 0 ~ 20ma analog current             PLC register control analog output
  2            I                           output                                     value size
  3         COM4                 Analog output common land



                                   Description of analog output parameter
                                                 conversion
Seria
  l
num            Parametric
 ber           characteristic           Detailed description                            Notes
  1      Output Analog range             0 ~ 10V/0 ~ 20ma
         Corresponding
  2      numerical range                      0 ~ 4095                         Decimal system
                                                                      The value of the PLC Data Register
         Analog output                                                              D8080,
  3      channel register                    Delta 8080                Determines the size of the output
                                                                         value of the analog quantity



        See Appendix C-2.

6. Communications Guide

      Currently AMX-FX3U-26/T-E supports RS422, RS485 and RJ45(10/100Mbps) interface
      communication.

6.1RS422 interface communication
      The RS422(master) interface of PLC is used as programming interface, and also can
      communicate with PC/touch screen which supports FX3U protocol.




                                  Pin sequence                 Pin name
1   422

2   422 +

3    SG

4   422

7   422 +



            18
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




   Users can communicate with PLC by using USB to RS422 signal s terminal serial port wire. It is
suggested that the PLC can be purchased with USB-SC09 model programming cable.
   Programming
        steps:
Step 1: connect the programming lines
    Connect USB port of USB-SC09 programming line to computer, S8 serial port round head end
    to PLC programming port;

Step 2: Power up the PLC with the computer

     After the PLC is powered up, the RUN light (RUN light) and the power light (SYS green light is
     normal) will come on.

Step 3: check the port number of the programming line on the Device Manager

     As shown in Figure 6.1, the USB-SC09 port number used for this demonstration is
     COM6(depending on the user) .




                        Figure 6.1 Device Manager USB-SC09 port number
    If you do not have a driver, please go to the www.amsamotion.com website to download-USB
driver-CH340 driver to download and install the driver.
Step 4: Program software communication settings

      After creating the new FX3U project, open the transmission settings or connection target
settings, select the USB port number as USB-SC09’s port number (the user’s own reality) , then
click the communication test, after success, pay attention to click OK and then exit.
   When the user device supports RS422 serial port signal and FX3U PLC protocol, the PLC data can be
monitored by RS422. The default communication parameters are 9600,7, EVEN, 1(baud rate adaptive) .


                                                                                                       19
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

6.2RS485 interface communication
       AMX-FX3U net port series programmable controller contains only one channel, but it can pass
       through the following: communication with FX3U PLC protocol (default) , PLC as Modbus RTU
                                       Master Communication, PLC as Modbus RTU slave communication
Information, specific configuration and use reference to the following sections.

6.2.1.485 communication using FX3U PLC

    When AMX-FX3U net port series programmable controller is manufactured, the RS485 terminal
default is FX3U PLC protocol communication port (corresponding D8200 register value is 0) ,
communication parameters default 9600,7, EVEN, 1. When the 485 communication function is
MODBUS communication function, the user needs to pass through
As shown in the following program, the driver will register the value of power-off restart after the
resumption of communication with the PLC protocol.




6.2.2, PLC for Modbus RTU main station communication

     The main station function is turned off by factory default and needs to be started via the
     M8411 driven setup instruction D8200 with a value of K1.
     The realization of communication function of Modbus RTU main station with PLC is generally
     divided into two steps:
                                 , configure the master station              Configuration, such as configuring the
     1) yes                      parameters (                                         RS485 function configuration
Register D8200 value of 1, configuration communication format D8400, etc.) , can refer to master
communication parameters, Master PLC program content.
     2) using different              In order to read and write the slave station data, we can refer to the ADPRW
     functional code                                          instruction summary, the main station each function
The code uses routine content.



                                       Modbus RTU          Functional communication format
                                                                                                        Read
                                                                                                        and
                                                                     Bit state description              write
              Bit Number         Implications
                                                            0(OFF)                     1(ON)
                 B zero          Data Length                  No                         8 bit
                                                              00: None
                 B2B1            Check mode                   01: Odd Check (Old-RRB- * 1
                                                              11: Even * 1
   Register       B3               Stop bit                  1 bit                    2 bit * 1
                                                       0101:1200           1001:19,200                  R/W
                           0110:2400     1010:38400 * 1
B7B6B5B4     Baud rate     0111:4800     1011:57,000 * 1
                           1000:9600     1100:115200
           Communication                        Modbus
  B8          protocol          No              protocol
           Communication
  B9           mode           RTU mode                 No


                                                            20
Dongguan AMX Automation Technology                             AMX-FX3U net port series programmable
            Co. , Ltd.                                         controller manual


                B15 ~ B10        Do not use                        0000000
               Example: when D8400 = 0x0181, data length 8, no check, 1 stop bit, baud rate 9600, Modbus
               Protocol RTU mode

* 1. Only supported in PLC software version V1.3 or above.



  Register               Function name                                   Function description
         The flag bit set for Modbus          Setting Modbus parameters must be driven by M8411. The power
   M8411 communication parameters             on PLC will keep on
                                              When D8200 = K1, the communication function of RS485 is
 Delta 8200 R485 interface function switch    switched to PLC as Modbus RTU master station
                                              The communication format when Configuring PLC as Modbus
            Communication format of           RTU master station; see Modbus above for details
 Delta 8400 Modbus RTU master station
                                              Communication Format of RTU main station
                                              Timeout time-out (in MS) for the response of the slave station,
 Delta 8409 Timeout time                      after which the response time-out is determined
                                              The delay (in MS) between a request sent by the primary site and
 Delta 8411 Inter request delay               the next request
                                              The number of times the master retransmitted a communication
 Delta 8412 Number of retries requested       request when a timeout occurred from the slave station
            No. When PLC acts as Modbus
 Delta 8414 RTU main station                  0 is the default
                                              When the communication of PLC as Modbus RTU main station
  M8402 Error flag bit                        goes wrong, M8402 is ON
            Communication error code          Store master communication error code, error code description see
 Delta 8402 content                           Appendix B




      The software components in the Master Station PLC setup routine are described as follows:
 Address                  Function name                                       Account for
                                                  Setting Modbus parameters must be driven by M8411. The
             Sets the flag bit for Modbus         power on PLC will be kept
 M8411       communication parameters
                                                  Put It through
           This PLC R485 interface function       A routine setting of K1 indicates that the 485 interface is
Delta 8200 disposition                            configured to be used as the Modbus Master
                                                  Routine set to the value of H181,8-BIT data, no checksum, 1
                                                  stop
           Time Communication Format of           Bit, 9600 baud rate, RTU mode using Modbus protocol, other
Delta 8400 Modbus RTU master station based on     formats
             PLC.
                                                   Reference Master Communication Format Table
             Reply response timeout (MS) for slave The routine sets the value K2000, indicating a timeout of 2
Delta 8409   stations                              seconds
                                                   For example, if the routine is set to K0, the default delay
Delta 8411   Inter-frame data request delay (MS)   interval for the system is used
                                                   The value K3 is set in the routine to indicate that the
                                                   communication connection will be retried 3 times after the
Delta 8412   Number of retries requested           timeout
             The station number when PLC is the
Delta 8414   main station of Modbus RTU            0 is the default



                                                                                                                 21
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Pay attention
PLC power to execute the above initialization code, before the main station communication, so power
 communication should keep the main Station PLC when setting the program
PLC power-on if change the main station set program parameters, power off and restart will be effective.




   The Modbus communication function of PLC is to communicate (read/write data) through the
ADPRW instruction (16 bits continuously execute instruction) .
    When calculating instructions, act according to the parameters S2, S3, S4 on the slave station s
    according to the function code S1.




          Type of
          operand                                   Content                              Data type
                       From station number (station number range 1-
              S        247) * 1                                                          BIN16 bit
             S1        Function code (support 01,02,03,04,05,06,15,16 function code)     BIN16 bit
                       Function parameter corresponding to function
             S2        code                                                              BIN16 bit
                       Function parameter corresponding to function
             S3        code                                                              BIN16 bit
                       Function parameter corresponding to function
            S4d        code                                                             Bit/BIN16 bit
* 1. Station number “17-247”is supported only in PLC software version V1.3 and above,
the following version maximum station number 16.
     The required function parameters for each
     function code are shown in the following
     table.
          S1                     S2                     S3                            S4
       Functional        Modbus starting                               Initial data storage software
         Code            address               Access points                      element
                                                                   Read object soft element/(starting
           1h              Modbus address:                         address)
                                           Access Points: 1 ~ 2000
                                                                   Object Software
       Coil readout       0000H ~ FFFEH                            component: D
            2H             Modbus address: Access Points: 1 ~ 2000 Read object soft element/(starting
                                                                 address)
  Input dispersion                                               Object Software
      readout            0000H ~ FFFEH                           component: D
                                                                 Read object soft element (start
          3h              Modbus address:                        address)
                                          Access points: 1 ~ 125
                                                                 Object Software
 Keep Register read        0h ~ FFFEH                            component: D
                                                                 Read object soft element/(starting
          4h              Modbus address:                        address)
                                          Access points: 1 ~ 125
                                                                 Object Software
Input register readout   0000H ~ FFFEH                           component: D


                                                                                                      22
Dongguan AMX Automation Technology Co. ,                      AMX-FX3U net port series programmable
Ltd.                                                          controller manual

                                                                     Write object soft element/(start
           5h             Modbus address:                            address)
                                                   0(fixed)
    Single coil write     0000H ~ FFFEH                              Object Software component: D
                                                                     Write object soft element (start
           6h             Modbus address:                            address)
                                                   0(fixed)
  Single Register write   0000H ~ FFFEH                              Object Software component: D
           An
           Arrangemen                                            Write object soft element (start
                                             Number of visits: 1 ~
           t              Modbus address:                        address)
                                                   1968
   Batch coil writing     0000H ~ FFFEH                          Object Software component: D
                                                                 Write object soft element (start
         10H              Modbus address:                        address)
                                          Access points: 1 ~ 123
  Batch register write    0000H ~ FFFEH                          Object Software component: D


Pay attention
Function code S4 object software components only support data register D, set other software components
    PLC error indicator will light error.




    The following routine, the “Master station settings program”part has been omitted, users use
    the master station before the function code, according to the previous part of the content

         ”, make sure the master is set correctly.

    ADPRW detailed instructions are presented primarily in the “Function 01”routine and are not
    repeated in other routines.
23
 AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
 Technology Co. , Ltd. . Dongguan



Operands             Function operand name # 1                               Description of routine content
            The slave station number to be accessed by Routine for K 1, PLC Access Station number for 1 slave
    S       this PLC Master Station                    equipment data
            This PLC master station access slave         Routine for K 1, that PLC uses 01 function code read
   S1       station used when the function code          slave station coil state
            This PLC master station accesses the
            Modbus starting address of the slave         0h in the routine means that the PLC accesses the slave
   S2       station                                      station from Modbus Address 0H
            The number of Modbus addresses that this     Routine for K32, that PLC read from the slave station 32
    S3      PLC master station accesses slave stations   coil status
            The number of the Modbus address of the
            slave station accessed by the PLC Master
            Station                                      The routine is D3, which means that the PLC will access
            According to the data to be stored in the    what is obtained from the Modbus station address
  S4d       PLC register from
                                                         Coil status data, stored from the PLC address D3
            Starting address


        M8029: end of instruction execution flag, driving the ADPRW instruction to start and end after
        instruction execution, M8029 becomes ON.
    M8402: an error flag for Modbus communication. M8402 becomes ON when the
 Modbus communication fails due to human error or equipment damage.
     D8402: when the Modbus communication error, the PLC D8402 will give the relevant
 communication error code, with Appendix B error code description, easy for the user to
 check the cause of communication error.


        In the routine, whenever x 1 changes from OFF to ON, M0 is set to ON, and M0 is set to ON,
        ADPRW is driven
 Instruction execution function (function 01 in routine, execution should keep driving condition M0
 as ON) , when M8029 changes from OFF to ON, ADPRW instruction execution is finished.
     Routine ADPRW instructions to perform the specific action of function 01 is the result of this
     PLC master station from No. 1 slave station equipment
 Modbus address 0 starts to access the state of the 32 coils, and then puts the read state into the
 PLC address beginning with D3, and stores the sequence in order to start accessing the Modbus
 address from low to high, one by one corresponds to the beginning of the PLC storage address
 from the lower to the higher word.

 Pay attention
With the ADPRW instruction, keep the drive contacts (such as M0) ON until the end of the ADPRW instruction
 (M8029 is ON) .
When driving multiple ADPRW instructions simultaneously in the Modbus master station, only one instruction
    is executed at a time. When the current instruction ends, execute the next ADPRW instruction in
 procedural order.
Do not disconnect the status before an ADPRW communication ends. When a state is disconnected during
    communication, the ADPRW instruction becomes a stop-in state. Will not be transferred to other
 ADPRW commands. Please refer to the following notes for programming sequence control:
         Interlock your state transition conditions with the ON condition of M8029(end of instruction flag bit)
    to ensure no state transition occurs while communicating with other stations. For example, in the
    example above, only if M8029 is ON will the driver condition M0 of function 01 be reset and the driver
 condition M1 of function 02 be reset.
When the state is disconnected in the communication process, the remaining communication can be
    completed after the state is ON again, but the communication time-out may occur according to the
 disconnection time.
When using the ADPRW instruction in a program flow, the ADPRW instruction can not be used in the
    following program flow:
         Between the CJ-P conditional jump instruction, the FOR-NEXT loop instruction, the P-sret subroutine,
         the I-IRET interrupt subroutine;




                                                                                                            24
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    No. Function routine as above, use instructions refer to “Coil read function 01”content




    No. Function routine as above, use instructions refer to “Coil read function 01”content




                                                                                              T
                                                                                              w
en
ty
-
fi
ve
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    No. Function routine as above, use instructions refer to “Coil read function 01”content




    No. Function routine as above, use instructions refer to “Coil read function 01”content


                                                                                              26
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    No. Function routine as above, use instructions refer to “Coil read function 01”content




                                                                                              27
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    0F function routine as above, the use of instructions refer to “Coil read function 01”content




                                                                                                28
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




No. Function routine as above, use instructions refer to “Coil read function 01”content




                                                                                          29
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

6.2.3. Using PLC to communicate with Modbus RTU slave station

     The slave function is turned off by factory default and needs to be started via the M8411
     driven setup instruction D8200 with a value of K2.
     The realization of the communication function of Modbus RTU slave station with PLC is
     generally divided into two steps:

     1) configuration of master station parameters (configuration, such as configuration of RS485
function configuration register D8200 value of 2, configuration of communication format D8420) ,
can refer to master station communication parameters, master station PLC program content.
    2) through four allocation registers: D8480 ~ D8483, to determine the PLC by Modbus RTU
master access to the type of software components address and number range.




                  Functional Communication Format of Modbus RTU slave station
                                                                                                     Read
                                                                                                     and
                                                               Bit state description                 write
              Bit Number       Implications
                                                          0(OFF)                       1(ON)
                B zero         Data Length                   No                          8 bit
                                                             00: None
                                                             01: Odd Check (Old-
                B2B1           Check mode                    RRB- * 1
                                                              11: Even * 1
                  B3              Stop bit                   1 bit                     2 bit * 1
  Register                                           0101:1200            1001:19,200
   Delta                                                                                  *
                                                                                          1              R/W
   8420                                              0110:2400            1010:38,400
              B7B6B5B4           Baud rate           0111:4800            1011:57,000 * 1
                                                     1000:9600            1100:115200
                              Communicatio
                  B8            n protocol                No                   Modbus protocol
                              Communicatio               RTU
                  B9             n mode                  mode                            No
              B15 ~ B10         Do not use                           0000000
             Example: when     0x0181, data length 8, no check, 1 bit stop bit, baud rate 9600, Modbus
             D8420 =           protocol
             RTU mode

* 1. Only supported in PLC software version V1.3 or above.
30
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




 Register        Function name                                     Function description
           Modbus
           communication
           parameter setting      Setting Modbus parameters must be driven by M8411. The power on PLC
 M8411 For the first time in      will keep on
           history
           R485 interface         When D8200 = K2, the communication function of RS485 is switched, which
Delta 8200 function switch        is a Modbus RTU slave station for PLC
           Slave station
           communication of       The communication format of Configuring PLC to Modbus RTU slave
           Modbus RTU             station is described above
Delta 8420
           Format                 Format
           PLC as slave station
Delta 8434 address                Configure PLC as the slave station address (station number range 1-247)
                                     1) Configure PLC to Modbus RTU slave mode:
           Using PLC as Modbus Coil starting address (prefix 0x)0x00 corresponding to the PLC starting soft
           RTU wire                  components, and points;
           The starting soft
           element and element of 2) no more than 7 * 32 = 224 bits (7 * 8 = 56 when the software version is
Delta 8480 the ring                  below V1.3)
                                     3) factory default coil address 0x00 ~ 0xDF corresponding PLC address y 0 ~
           Number                    Y337(software version V1.3 to
                                     The next coil address 0x00 ~ 0x37 corresponds to the Y0 ~ Y6F address of
                                     PLC)
                                     1) Configure PLC to Modbus RTU slave mode:
           Using PLC as Modbus Input the discrete quantity starting address -LRB-prefix 1x)0x00
           RTU input                 correspondPLC PLC starting software components, and the number of points;
           Initial soft element into 2) no more than 7 * 32 = 224 bits (7 * 8 = 56 when the software version is
Delta 8481 discrete quantity         below V1.3)
           And the number of         3) x0 ~ X337(software version) of PLC address corresponding to 0x00 ~
           components                0xDF
                                     Input the discrete quantity address 0x00 ~ 0x37 corresponding to the PLC’s
                                     x0 ~ X6F address below V1.3)
                                     1) Configure PLC to Modbus RTU slave mode:
           Using PLC as Modbus Input Register starting address (prefix 3x)0x00 corresponding PLC starting
           RTU input                 software components, and the number of points;
           Entry Register starting 2) no more than 7 * 16 = 112 words (4 * 16 = 64 when the software version
Delta 8482 software element          is below V1.3)
           And the number of         3) factory default input register address 0x00 ~ 0x6F corresponding PLC
           components                address D8030 ~ D8141(software
                                     Enter Register address 0x00 ~ 0x3F for PLC D8030 ~ D8093 address below
                                     V1.3
                                     1) Configure PLC to Modbus RTU slave mode:
           Modbus RTU                Keep the register starting address (prefix 4X)0x00 corresponding to the PLC
           protection by PLC.        starting software components, and the number of points;
           Register-holding
           starting software         2) no more than 7 * 16 = 112 words (4 * 16 = 64 when the software version
Delta 8483 element                   is below V1.3)
           And the number of         3) factory default keep register address 0x00 ~ 0x6F corresponding PLC
           components                address D7200 ~ D7311(software
                                     V1.3 below the coil address 0x00 ~ 0x3F corresponding to the PLC D7200 ~
D7263 address)




                 31
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




The software components in the PLC setup routine at the slave station are illustrated as follows:
Address             Function name                                          Account for
      The flag bit set for Modbus          Setting Modbus parameters must be driven by M8411. The power on
M8411 communication parameters             PLC will keep on
 Delta                                     The routine setting value of K2 indicates the configuration of 485
 8200     R485 interface function switch   interface as a RTU slave station Modbus function
          Time Communication of          The routine sets a value of H181, representing 8-bit data, no check, 1
          Modbus RTU slave station based stop bit,
 Delta    on PLC.                        9600 baud rate, using Modbus Protocol RTU mode, other format
 8420                                    setting reference slave station
          Format
                                         Communication format form
 Delta                                   The routine setting value k 1 indicates that the station address of the
 8434     PLC as slave station address   PLC is 1
          PLC as starting point of Modbus
 Delta    RTU coil
 8480     Soft components and number of
          components
          PLC as discrete input of Modbus
 Delta    RTU
 8481     The starting soft component and
          the number of components        The configuration instructions refer to the corresponding page P33-
                                          P41
          PLC as Modbus RTU input
 Delta    register
 8482     The starting soft component and
          the number of components
          PLC as the Modbus RTU hold
 Delta    register
 8483     The starting soft component and
          the number of components

Pay attention
PLC power-on to execute the above initialization code, will save the parameters, power-off reset after the
 parameters set will be effective.
In order to reduce the power-on time to save parameters to write FLASH, after the execution of this set code
     once, you can delete this set program, later if you need to change communication parameters to write
     to join the run.




                                                                                                          32
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




     When PLC is used as Modbus RTU slave station, it determines the type address and number
range of soft components accessed by Modbus RTU master station in PLC by four distributing
registers: D8480 ~ D8483.




    Its numerical format:
    Address bit: after the address 13 bits (Bit0 ~ Bit12) reflected by the numerical value, determine
      the host site access to the type of software components and starting address;
    Bit number: the first 3 bits (bit 13 ~ bit 15) reflect the value, determine the number of software
       components visited by the host.
    For example, in order to specify M100 ~ M200 as the coil discrete quantity in PLC, it is
necessary to assign the corresponding allocation register-d8480 register and specify the value of its
address bit (last 13 bits) , the coil discrete quantity of master station access slave station is the M
soft component of PLC, and how many M soft components are accessed when the value of the
number of points (the first 3 bits) is what value.
    The following is the coil discrete quantity, input discrete quantity, input register, register four
    types of access address and number format
Smart.

Pay attention
Must take M8411 as the instruction drive, through MOV and other data transmission write instruction, change
      the configuration address D8480 ~ D8483 numerical value, the PLC power cut restarts after taking effect,
      the following explanation does not make this stipulation again to emphasize, the user needs to pay
 attention.
If the configuration value exceeds the PLC address range, the master station will fail to communicate if the
      access range also exceeds the PLC address range.
33
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




 Modbus                                                                                      Corresponding
              Soft   Support for assigned software component                                relation with soft
  Initiati                            ranges                            (lower 13th)           component
            element
  ng                                                 *1
           Categorie
                                                                                        Corresponding to the
  Addres       s
                       224 addresses for a maximum of one        Address bit value     start address of the soft
  s                            software component                   (base 10)                 component
              Y                  Y 0 ~ y 337 * 2                  0 ~ 121,192 ~ 499              Y zero
                                                                        128                        M0
                                                                        129                       M16
                                                                 Suppose X (127 < x
              M                   M0 ~ M1023                          < 192)               M ((X-128) * 16)
                                                                        190                      M992
  0x00                                                                  191                     M1008
                                                                        500                      D500.0
                                                                        501                      D501.0
                               D500.0 ~ D7999.15
              D                                                                        ......
                                 (bit of register)
                                                                       7998                     D7998.0
                                                                       7999                     D7999.0
 Explanat
 ion:
 1) counting rules: Register Point number corresponds to value * 32(software version V1.3 below times 8) ,
 point number size 0 ~ 7
 2) when the number of points is 0, no matter what the address bit value is, the
 corresponding soft element starting address is all Y0
 3) if the point plus address assignment result is out of the “Soft component range that supports the
 assignment,”only the maximum range upper limit, such as M1023, can be accessed
* 1. Only 224 are supported in PLC software version V1.3 or above and 56 in the
following versions.
* 2. Y70 ~ Y377 is supported only in PLC software version V1.3 and above, Y0 ~ Y6F
is default in the following version.
     M8411 must drive the use of MOV instructions to assign numerical values to D8480(usually
with Slave PLC programming to a piece) , power-down restart effect of the new settings.


                                                                                           34
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



                                                     
    Take the example of assigning the value H6050 to D8480:




     As you can see from the image above:
     1) the corresponding decimal value of D8480 is, in accordance with the “Modbus RTU coil
     distribution address table”, the PLC.
    used as Modbus RTU for main station access, coil.
     2) the corresponding decimal value of D8480, then the number of coils for the main station to
     access are: (software version
3 * 8 = 24 below V1.3).
     However, for the Y coil software components, no matter how many configuration, according to
     224 maximum points (software version V1.3 below 56) .
     Therefore, the PLC soft component Y 0 ~ Y337(octal) corresponds to the Modbus coil address
     0x00 ~ 0xDF, for the main station access.
Note: AMX-FX3U-26MT, AMX-FX3U-32M actual hardware coil range is “Y 0 ~ Y12”, “Y 0 ~ Y17”, the rest is
software range.


    Take the example of assigning the value H8090 to D8480:




     As you can see from the image above:
     1) the corresponding decimal value of D8480 is, in accordance with the “Modbus RTU coil
     distribution address table”, the PLC.

    Used as Modbus RTU for main station access, coil.
     2) D8480 has a corresponding decimal value of 4. The number of coils to be accessed by the
     main station is: (software version
4 * 8 = 32 below V1.3).
     Therefore, the PLC soft component M256 ~ M383 corresponds to Modbus RTU coil address
     0x00 ~ 0x7F for the main station to access.


    Take the example of assigning the value H9970 to D8480:
35
                                                         AMX-FX3U net port series programmable controller
Dongguan AMX Automation Technology Co. , Ltd.                                                    manual
     As you can see
     from the image
     above:
                       The corresponding decimal       , according to “Modbus RTU coil distribution address
     1) D8480          value is                                                                table”, PLC
                                  Access to the main
          As Modbus RTU           station, Coil                                 。
                       The corresponding decimal number is 4, and the number of
     2) D8480          coils accessed by the primary site is:                            (software version
4 * 8 = 32 below V1.3).
     Therefore, the PLC soft component D6000.0 ~ D6007.15 corresponds to Modbus RTU coil
     address 0x00 ~ 0x7F for the main station to access.




  Modbus                                                                                      Corresponding
              Soft  Support for assigned software component                                  relation with soft
            element                  ranges                              (lower 13th)           component
                                                                                         Corresponding to the
   Initiati Categorie 224 * 1 addresses for a maximum of one      Address bit value     start address of the soft
   ng           s               software component                   (base 10)                 component
   Addres
   s
               X                  X 0 ~ x 337 * 2                 0 ~ 121,192 ~ 499               Y zero
                                                                         128                        M0
                                                                         129                       M16
                                                                  Suppose X (127 < x
               M                   M0 ~ M1023                          < 192)               M ((X-128) * 16)
                                                                         190                      M992
   0x00                                                                  191                     M1008
                                                                         500                      D500.0
                                                                         501                      D501.0
                                D500.0 ~ D7999.15
               D                                                                        ......
                                  (bit of register)
                                                                        7998                     D7998.0
                                                                        7999                     D7999.0
  Explanat
  ion:
  1) counting rules: Register Point number corresponds to value * 32(software version V1.3 below times 8) ,
  point number size 0 ~ 7
  2) when the number of points is zero, no matter what the address bit value is, the
  corresponding soft element starting address is X0
  3) if the point plus address assignment result is out of the “Soft component range that supports the
  assignment,”only the maximum range upper limit, such as M1023, can be accessed
* 1. Only 224 are supported in PLC software version V1.3 or above and 56 in the
following versions.
* 2. X70 ~ X377 is supported only in PLC software version V1.3 and above. x0 ~ X6F
is the default for the following version.
36
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



    For example, assign the value H212C to D8481:




     As you can see from the image above:
     1) the corresponding decimal value of D8481 is, in accordance with the “Modbus RTU input
     discrete distribution address table”, PLC

As Modbus RTU for main station access, input discrete quantity.
     2) the corresponding decimal value of D8481 is, then the number of input discrete quantities
     for the master station to access is: (software
1 * 8 = 8 when V1.3 is below.
     But for the input discrete quantity X soft components, no matter how many configuration,
according to 224 maximum points (software version V1.3 below 56) .
     Therefore, the PLC soft component x 0 ~ X337(Octal) corresponds to Modbus RTU input
     discrete quantity 0x00 ~ 0xDF, for the main station access.
Note: AMX-FX3U-26MT, AMX-FX3U-32M actual hardware coil range is “X 0 ~ X12”, “X 0 ~ X17”, the rest is
software range.


    Take, for example, assigning the value H40a8 to D8481:




     As you can see from the image above:
     1) the corresponding decimal value of D8481 is, in accordance with the “Modbus RTU input
     discrete distribution address table”, PLC

As Modbus RTU for main station access, input discrete quantity
                。
     2) the corresponding decimal value of D8481 is 2, then the number of input discrete quantities
     for the master station to access are: (software
2 * 8 = 16 when V1.3 is below.
     Therefore, the PLC soft component M640 ~ M703 corresponds to Modbus RTU input discrete
     address 0x00 ~ 0x3F for the main station to access.


    Take, for example, assigning the value HE1F4 to D8481:
37
Dongguan AMX Automation Technology                        AMX-FX3U net port series programmable controller
Co. , Ltd.                                                                                        manual
      As you can see
      from the image
      above:
                           The corresponding              , according to “Modbus RTU input discrete distribution
      1) D8481             decimal value is                                                address table”, PLC
的            As Modbus RTU                    For master station access, input discrete quantity             。
                        The corresponding decimal value of 7, then the number of input
      2) D8481          discrete variables for the primary site to access is:                                      (soft
7 * 8 = 56 pieces below V1.3).
      Therefore, the PLC soft component D500.0 ~ D513.15 corresponds to Modbus RTU input discrete address
      0x00 ~ 0xDF, for the main station access.




 Modbus                                                                                               Corresponding
              Soft  Support for assigned software component                (lower                   relation with soft
            element                  ranges                                13th)                           component
                                                                                           Corresponding to the
                       No more than one software component,
           Categorie                                              Address bit value (base start address of the soft
Initiating     s                   112 * 1 address                         10)                   component
 Address
                                                                            0                           D0
                                     D0 ~       *
                                                2                           1                           D1
                                     D7999
    0x00         D     (when the point number is 0, the default                            ......
                                D8030 ~ D8141 * 3)                        7998                      Delta 7998
                                                                          7999                      Delta 7999
  Explanation:
  1) counting rules: Register Point number corresponds to value * 16, point number size 0 ~ 7(software version
  V1.3 below 0 ~ 4)
  2) when the number of points is 0, no matter what the address bit value is, the corresponding soft element
  start address is D8030
  3) if the point plus address assignment result is out of the range of the software component supporting the
  assignment, only the maximum range upper limit D7999 can be accessed
  4) need to pay attention to master station Access PLC address length longer, master station timeout need
  to set larger
* 1. Only 112 are supported in PLC software version V1.3 or above and 64 in the following versions.
* 2. D0 ~ D499 is supported in PLC software version V1.3 and above, D8030 is the starting bit of the
corresponding software element when the address bit value is “0 ~ 499”in the following version.
* 3. D8094 ~ D8141 is only supported in PLC software version V1.3 and above, the following version is default
D8030 ~ D8093.
38
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



    Take, for example, assigning the value HE0C8 to D8482:




     As you can see from the image above:
     1) the corresponding decimal value of D8482 is, in accordance with the “Modbus RTU input
     discrete distribution address table”, input

Input Register (D8030 for software below V1.3).
     2) D8482 has a corresponding decimal value of 7(up to 4 digits below software version V1.3)
     and is accessible to the primary site

The number of input registers is: .
     Therefore, the soft component D200 ~ D311 of PLC corresponds to Modbus RTU input register
     address 0x00 ~ 0x6F for the main station to access.




 Modbus                                                                                      Corresponding
              Soft   Support for assigned software component         (lower                relation with soft
            element                   ranges                         13th)                        component
                                                   *
Initiating Categorie                               1                                  Corresponding to the
               s           (use only one software            Address bit value (base start address of the soft
 Address                  component at most 112 )                     10)                   component
                                                                         0                         D0
                                   D0 ~       *
                                              2                          1                         D1
                                   D7999
  0x00        D      (when the point number is 0, the default                          ......
                               D7200 ~ D7311 *
                                       3)                              7998                     Delta 7998
                                                                       7999                     Delta 7999
 Explanation:
 1) counting rules: Register Point number corresponds to value * 16, point number size 0 ~ 7(software version
 V1.3 below 0 ~ 4)
 2) when the number of points is 0, no matter what the address bit value is, the corresponding soft element
 starting address is D7200
 3) if the point plus address assignment result is out of the range of the software component supporting the
 assignment, only the maximum range upper limit D7999 can be accessed
 4) need to pay attention to master station Access PLC address length longer, master station timeout need
 to set larger
* 1. Only 112 are supported in PLC software version V1.3 or above and 64 in the following versions.
* 2. D0 ~ D499 is supported in PLC software version V1.3 and above, D7200 is the starting bit of the
corresponding software element when the address bit value is “0 ~ 499”in the following version.
* 3. D7264 ~ D7311 is supported only above V1.3 of PLC software, and D7200 ~ D7263 is the default for the
following versions.




                                                                                                            39
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




    Take the value He258 assigned to D8482 as an example:




     As you can see from the image above:
     1) the corresponding decimal value of D8482 is, in accordance with the “Modbus RTU
     retention register distribution address table”, protect

Hold Register (D7200 for software below V1.3).
     2) D8482 has a corresponding decimal value of 7(up to 4 digits below software version V1.3)
     and is accessible to the primary site
The number of registers to hold is: .
     Therefore, the soft component D400 ~ D511 of PLC corresponds to the Modbus RTU holding
     register address 0x00 ~ 0x6F for the main station to access.
40
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

6.3 interface communication
       AMX-FX3U-26M-E programmable controller supports the communication of network interface
through which users can communicate programmatically or with devices that support the FX3U
protocol, such as touch screen. This section mainly describes the PLC side communication settings,
some touch screen or host side communication settings, please refer to “Appendix D”in the
content.



Specification of Ethernet parameters
Serial
numbe
  r        Parameter type      Function description Notes
                               Modbus TCP, MC       MC protocol refers to Mitsubishi PLC protocol, in this
   1      Support Protocol     protocol             connection for Ethernet interface communication
  2          Mesh rate              10100mbps
  3          Default IP            192.168.1.18
         Modbus service port
  4           number                   502           Unalterable
         MC protocol service
  5         port number             5551,6551        Unalterable



Special register corresponding to Ethernet parameters
Serial
numbe
  r        Parameter name              Parameter address                              Notes
         IP address segment
   1              1            Corresponds to D8470 high bytes                  Power-down hold
         IP address segment
  2               2            Corresponds to D8470 low bytes                   Power-down hold
         IP address segment
  3               3            Corresponds to D8471 high bytes                  Power-down hold
         IP address segment
  4               4            Corresponds to D8471 low bytes                   Power-down hold
  5      MAC address end 1     Corresponds to D8472 high bytes                  Power-down hold
  6      MAC address end 2     Corresponds to D8472 low bytes                   Power-down hold
   7     MAC address end 3     Corresponds to D8473 high bytes                  Power-down hold
  8      MAC address end 4     Corresponds to D8473 low bytes                   Power-down hold
  9      MAC address end 5     Corresponds to D8474 high bytes                  Power-down hold
            MAC address
  10         Terminal 6        Corresponds to D8474 low bytes                   Power-down hold
                               That corresponds to the lower 12
  11         Error code                digits of D8475                           The power’s out
41
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




     As above, register D8470, D8471 high and low byte size as the PLC IP four address segment.
     By writing a program
The M8411 driver assigns values to these two addresses, and the PLC takes effect when the power
is switched off and restarted, as shown in the following figure:




     The software component in the modified IP routine above is described as follows:
1) M8411: setting the flag bit of Modbus communication parameter, must use its driver, PLC power
on will keep on
2-RD84708470: set address segment 1 and address segment 2 of 4 IPt IP address to HC0A8 in
routine:




           Hexadecimal HC0 corresponds to IP address segment 1 and is converted to decimal
           number 192
           Hexadecimal HA8 corresponds to IP address segment 2, converted to decimal 168
3) D8471: set the address segment 3 and address segment 4 of the 4-bit IP address to H120 in the
routine:




           Hexadecimal H01 corresponds to IP address segment 3, converted to decimal number 1
           Hexadecimal H20 corresponds to IP address
     segment 4, converted to decimal number 18, PLC’s IP is
     192.168.1.18.
    The subnet mask is fixed at 255.255.255.0(the default subnet mask for the Class C IP address) ,
the first three segments of the default gateway are the first three segments of the user’s IP (the
network number for the Class C IP address) , and the last segment is fixed at 1, so the default
gateway in the sample program is 192.168.1.1.
Pay attention
PLC power to execute the above initialization code, the IP parameters will be saved, power reset after the
 parameters set will take effect.
In order to reduce the power-on time to save parameters to write FLASH, the new IP has taken effect, you
     can delete this section of the setting procedure, if you need to change the communication parameters
 later to write to join the operation.
As the subnet mask, the default gateway can not be set, the interface parameters users only need to set the
     IP address.



                                                                                                          42
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

6.3.1, communication with Mitsubishi programming software (GX Works2 version)



    AMX-FX3U-26M-E default IP address is 192.168.1.18(change IP by Ethernet parameter setting
routine) . Should ensure that the computer IP network segment and PLC consistent and IP does not
conflict, as shown in the following figure set the computer local IP address 192.168.1.110.



    After opening the connection target setting window of Mitsubishi’s programming software,
    configure it by directly entering the Ethernet module IP, as shown in the following figure.




    Follow the 1-4 steps shown above.

Pay attention
When GX Works2 programming software establishes the Ethernet connection with PLC, the user needs other
   upper computer/touch screen which supports MC Ethernet protocol to connect PLC at the same time,
   please use port 6551
43
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

6.3.2, Modbus TCP communication description

     PLC fixes port 502 as Modbus TCP server communication.
     The implementation of communication between the Modbus TCP client and the PLC as
     Modbus TCP server is generally divided into two steps:
     1) through four allocation registers: D8480 ~ D8483, to determine the PLC by Modbus RTU
master access to the type of software components address and number range.
     The client selects the Modbus TCP protocol and fills in the PLC’s IP (default IP: 192.168.1.18)
     and port number 502.



 Register        Function name                                     Function description
                                     Configure PLC in Modbus TCPU Server Mode:
           PLC as Modbus TCP Coil starting address (prefix 0x)0x00 corresponding to the PLC starting soft
           line                      components, and points;
           The starting soft
           element and element of 2) no more than 7 * 32 = 224 bits (7 * 8 = 56 when the software version is
Delta 8476 the ring                  below V1.3)
                                     3) factory default coil address 0x00 ~ 0xDF corresponding PLC address y 0 ~
           Number                    Y337(software version V1.3 to
                                     The next coil address 0x00 ~ 0x37 corresponds to the Y0 ~ Y6F address of
                                     PLC)
                                     Configure PLC in Modbus TCPU Server Mode:
           PLC as Modbus TCP Input the discrete quantity starting address -LRB-prefix 1x)0x00
           input                     correspondPLC PLC starting software components, and the number of points;
           Initial soft element into 2) no more than 7 * 32 = 224 bits (7 * 8 = 56 when the software version is
Delta 8477 discrete quantity         below V1.3)
           And the number of         3) x0 ~ X337(software version) of PLC address corresponding to 0x00 ~
           components                0xDF
                                     Input the discrete quantity address 0x00 ~ 0x37 corresponding to the PLC’s
                                     x0 ~ X6F address below V1.3)
                                     Configure PLC in Modbus TCPU Server Mode:
           PLC as Modbus TCP Input Register starting address (prefix 3x)0x00 corresponding PLC starting
           input                     software components, and the number of points;
           Entry Register starting 2) no more than 7 * 16 = 112 words (4 * 16 = 64 when the software version
Delta 8478 software element          is below V1.3)
           And the number of         3) factory default input register address 0x00 ~ 0x6F corresponding PLC
           components                address D8030 ~ D8141(software
                                     Enter Register address 0x00 ~ 0x3F for PLC D8030 ~ D8093 address below
                                     V1.3
                                     Configure PLC in Modbus TCPU Server Mode:
           PLC as Modbus TCP Keep the register starting address (prefix 4X)0x00 corresponding to the PLC
           protection                starting software components, and the number of points;
           Register-holding
           starting software         2) no more than 7 * 16 = 112 words (4 * 16 = 64 when the software version
Delta 8479 element                   is below V1.3)
           And the number of         3) factory default keep register address 0x00 ~ 0x6F corresponding PLC
           components                address D7200 ~ D7311(software
                                     V1.3 below the coil address 0x00 ~ 0x3F corresponding to the PLC D7200 ~
                                     D7263 address)
44
 AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
 Technology Co. , Ltd. . Dongguan




      The software component in the Modbus TCP server setter routine above is explained as follows:
Address             Function name                                         Account for
       The flag bit set for Modbus         Setting Modbus parameters must be driven by M8411. The power on
 M8411 communication parameters            PLC will keep on
          PLC as the starting point of
  Delta   Modbus TCP coil
  8480    Soft components and number of
          components
          PLC as discrete input of Modbus
  Delta
          TCP
  8481    The starting soft component and
          the number of components        The configuration instructions refer to the corresponding page P45-
                                          P52
          PLC as Modbus TCP Input
  Delta   Register
  8482    The starting soft component and
          the number of components
          PLC as Modbus TCP hold
  Delta   register
  8483    The starting soft component and
          the number of components

 Pay attention
PLC power-on to execute the above initialization code, will save the parameters, power-off reset after the
 parameters set will be effective.
In order to reduce the power-on time to save parameters to write FLASH, after the execution of this set code
     once, you can delete this set program, later if you need to change communication parameters to write
     to join the run.




     When PLC communicates with Modbus TCP server, it determines the type address and number
 range of software components accessed by MODBUS TCP client in PLC by four allocation registers:
 D8476 ~ D8479.
45
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

    Its numerical format:
    Address bit: after the address 13 bits (Bit0 ~ bit12) reflected the numerical value, determines by
      the client access software component type and the starting address;
    Point number: the first 3 bits (bit 13 ~ bit 15) reflect the value, determine the number of
      software components accessed by the client.
    For example, in order to specify M100 ~ M200 as the coil discrete quantity in PLC, it is
necessary to assign the corresponding allocation register-d8476 register and specify the value of its
address bit (last 13 bits) , the coil dispersion of client access server is the M soft component of PLC,
and how many M soft components are accessed when the value of the number of points (the first 3
bits) is what value.
    The following is the coil discrete quantity, input discrete quantity, input register, register four
    types of access address and number format
Smart.

Pay attention
Must take M8411 as the instruction drive, through MOV and other data transmission write instruction, change
   the configuration address D8476 ~ D8479 numerical value, the PLC power cut restarts after taking effect,
   the following explanation does not make this stipulation again to emphasize, the user needs to pay
 attention.
When the configuration value exceeds the PLC address range, the client will fail to communicate if the access
   range also exceeds the PLC address range.




 Modbus                                                                                     Corresponding
             Soft  Support for assigned software component                                 relation with soft
           element                  ranges                             (lower 13th)           component
                                                                                       Corresponding to the
   Initiati Categorie 224 * 1 addresses for a maximum of one    Address bit value     start address of the soft
   ng           s               software component                 (base 10)                 component
   Addres
   s
              Y                  Y 0 ~ y 337 * 2                0 ~ 121,192 ~ 499               Y zero
                                                                       128                        M0
                                                                       129                       M16
                                                                Suppose X (127 < x
              M                   M0 ~ M1023                         < 192)               M ((X-128) * 16)
                                                                       190                      M992
   0x00                                                                191                     M1008
                                                                       500                      D500.0
                                                                       501                      D501.0
                               D500.0 ~ D7999.15
              D                                                                       ......
                                 (bit of register)
                                                                      7998                     D7998.0
                                                                       7999                   D7999.0
 Explanat
 ion:
 1) counting rules: Register Point number corresponds to value * 32(software version V1.3 below times 8) ,
 point number size 0 ~ 7
 2) when the number of points is 0, no matter what the address bit value is, the
 corresponding soft element starting address is all Y0
 3) if the point plus address assignment result is out of the “Soft component range that supports the
 assignment,”only the maximum range upper limit, such as M1023, can be accessed
* 1. Only 224 are supported in PLC software version V1.3 or above and 56 in the
following versions.
* 2. Y70 ~ Y377 is supported only in PLC software version V1.3 and above, Y0 ~ Y6F
is default in the following version.



                                                                                                             46
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




     Must Drive through the M8411 to use MOV instruction to assign numerical value to D8476,
     power-off restart effect new settings.


                                                     
    Take the example of assigning the value H6050 to D8476:




     As you can see from the image above:
     The corresponding decimal number of D8476 is, according to “Modbus TCP coil assignment
     address table”, PLC
    Serves as Modbus TCP for client access, Coil.
     2) the corresponding decimal value of D8476, then the number of coils for client access is:
     (software version
3 * 8 = 24 below V1.3).
     However, for the Y coil software components, no matter how many configuration, according to
     224 maximum points (software version V1.3 below 56) .
     Therefore, the PLC software component Y 0 ~ Y337(octal) corresponds to the Modbus TCP coil
     address 0x00 ~ 0xDF for client access.
Note: AMX-FX3U-26MT, AMX-FX3U-32M actual hardware coil range is “Y 0 ~ Y12”, “Y 0 ~ Y17”, the rest is
software range.


    Take, for example, assigning the value H8090 to D8476:




     As you can see from the image above:
     1) the corresponding decimal number of D8476 is, according to “Modbus TCP coil assignment
     address table”, PLC

    Serves as Modbus TCP for client access, Coil.
     2) D8476 has a corresponding decimal value of 4, the number of coils for client access is:
     (software version
4 * 8 = 32 below V1.3).
     Therefore, the PLC software component M256 ~ M383 corresponds to Modbus TCP coil
     address 0x00 ~ 0x7F for client access.



                                                                                                  47
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



    Take, for example, assigning the value H9970 to D8476:




     As you can see from the image above:
     The corresponding decimal number of D8476 is, according to “Modbus TCP coil assignment
     address table”, PLC

            Serves as Modbus TCP for client access, Coil.
     2) D8476 has a corresponding decimal value of 4, the number of coils for client access is:
     (software version
4 * 8 = 32 below V1.3).
     Therefore, the PLC soft component D6000.0 ~ D6007.15 corresponds to Modbus TCP coil
     address 0x00 ~ 0x7F for client access.




 Modbus                                                                                  Corresponding
              Soft  Support for assigned software component                             relation with soft
            element                  ranges                         (lower 13th)           component
                                                                                    Corresponding to the
  Initiati Categorie 224 * 1 addresses for a maximum of one   Address bit value    start address of the soft
  ng           s               software component                (base 10)                component
  Addres
  s
               X                 X 0 ~ x 337 * 2              0 ~ 121,192 ~ 499              Y zero
                                                                    128                        M0
                                                                    129                       M16
                                                              Suppose X (127 < x
               M                  M0 ~ M1023                       < 192)              M ((X-128) * 16)
                                                                    190                      M992
  0x00                                                               191                    M1008
                                                                    500                      D500.0
                                                                    501                      D501.0
                               D500.0 ~ D7999.15
               D                                                                   ......
                                 (bit of register)
                                                                    7998                    D7998.0
                                                                    7999                    D7999.0
 Explanat
 ion:
  1) counting rules: Register Point number corresponds to value * 32(software version V1.3 below times 8) ,
  point number size 0 ~ 7
  2) when the number of points is zero, no matter what the address bit value is, the
  corresponding soft element starting address is X0
  3) if the point plus address assignment result is out of the “Soft component range that supports the
  assignment,”only the maximum range upper limit, such as M1023, can be accessed
* 1. Only 224 are supported in PLC software version V1.3 or above and 56 in the
following versions.
* 2. X70 ~ X377 is supported only in PLC software version V1.3 and above. x0 ~ X6F
is the default for the following version.


                                                                                                              48
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




    Take, for example, assigning the value H212C to D8477:




     As you can see from the image above:
     The corresponding decimal number of D8477 is, according to “Modbus TCP input discrete
     distribution address table”, PLC

Modbus TCP is used as Modbus TCP for clients to access and input the discreteness.
     2) the corresponding decimal value of D8477 is, then the number of input discrete quantities
     for client access is: (soft
1 * 8 = 8 pieces below V1.3).
     But for the input discrete quantity X soft components, no matter how many configuration,
according to 224 maximum points (software version V1.3 below 56) .
     Therefore, the PLC software component X 0 ~ X337(octal) corresponds to Modbus TCP input
     discreteness 0x00 ~ 0xDF for client access.
Note: AMX-FX3U-26MT, AMX-FX3U-32M actual hardware coil range is “X 0 ~ X12”, “X 0 ~ X17”, the rest is
software range.


    Take, for example, assigning the value H40a8 to D8477:




     As you can see from the image above:
     The corresponding decimal number of D8477 is, according to “Modbus TCP input discrete
     distribution address table”, PLC

Modbus acts as a MODBUS for clients to access and input the discreteness
                。

     2) the corresponding decimal value of D8477 is 2, then the number of input discrete quantities
     for client access is: (soft
2 * 8 = 16 pieces below V1.3).
     Therefore, the PLC software component M640 ~ M703 corresponds to Modbus TCP input
     discrete address 0x00 ~ 0x3F for client access.


                                                                                         49
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



       For example, assign the value HE1F4 to D8477:




       As you can see from the image above:
       The corresponding decimal number of D8477 is, according to “Modbus TCP input discrete
       distribution address table”, PLC

Modbus TCP is used as Modbus TCP for clients to access and input the discreteness.
       2) D8477 has a corresponding decimal value of 7, so the number of input discrete quantities
       for client access is:
(software version V1.3 or below 7 * 8 = 56).
       Therefore, the PLC software component D500.0 ~ D513.15 corresponds to Modbus TCP input
       discrete address 0x00 ~ 0xDF, for client access
Ask.




 Modbus                                                                                              Corresponding
               Soft  Support for assigned software component              (lower                   relation with soft
             element                  ranges                              13th)                           component
                                                                                          Corresponding to the
           Categorie No more than one software component,        Address bit value (base start address of the soft
Initiating     s                112 * 1 address                           10)                   component
 Address
                                                                           0                           D0
                                    D0 ~       *
                                               2                           1                           D1
                                    D7999
  0x00         D      (when the point number is 0, the default                            ......
                               D8030 ~ D8141 * 3)                        7998                      Delta 7998
                                                                         7999                      Delta 7999
 Explanation:
 1) counting rules: Register Point number corresponds to value * 16, point number size 0 ~ 7(software version
 V1.3 below 0 ~ 4)
 2) when the number of points is 0, no matter what the address bit value is, the corresponding soft element
 start address is D8030
 3) if the point plus address assignment result is out of the range of the software component supporting the
 assignment, only the maximum range upper limit D7999 can be accessed
  4) the longer the client access PLC address is, the bigger the master station timeout is
* 1. Only 112 are supported in PLC software version V1.3 or above and 64 in the following versions.
* 2. D0 ~ D499 is supported in PLC software version V1.3 and above, D8030 is the starting bit of the
corresponding software element when the address bit value is “0 ~ 499”in the following version.
* 3. D8094 ~ D8141 is only supported in PLC software version V1.3 and above, the following version is default
D8030 ~ D8093.



                                                                                                           50
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




    Take, for example, assigning the value HE0C8 to D8478:




     As you can see from the image above:
     The corresponding decimal value of D8478 is, according to “Modbus TCP input register
     allocation address table”, input

Input Register (D8030 for software below V1.3).
     2) D8478 has a corresponding decimal value of 7(up to 4 digits below V1.3) for client access
The number of input registers is: .
   Therefore, the PLC soft component D200 ~ D311 corresponds to Modbus TCP input register
                              address 0x00 ~ 0x6F for client access.




 Modbus                                                                                             Corresponding
             Soft  Support for assigned software component               (lower                   relation with soft
           element                  ranges                               13th)                           component
                                                                                         Corresponding to the
           Categorie No more than one software component,       Address bit value (base start address of the soft
Initiating     s                112 * 1 address                          10)                   component
 Address
                                                                          0                           D0
                                   D0 ~       *
                                              2                           1                           D1
                                   D7999
  0x00        D      (when the point number is 0, the default                            ......
                              D7200 ~ D7311 * 3)                        7998                      Delta 7998
                                                                        7999                      Delta 7999
 Explanation:
 1) counting rules: Register Point number corresponds to value * 16, point number size 0 ~ 7(software version
 V1.3 below 0 ~ 4)
 2) when the number of points is 0, no matter what the address bit value is, the corresponding soft element
 starting address is D7200
 3) if the point plus address assignment result is out of the range of the software component supporting the
 assignment, only the maximum range upper limit D7999 can be accessed
 4) the longer the client access PLC address is, the bigger the master station timeout is
* 1. Only 112 are supported in PLC software version V1.3 or above and 64 in the following versions.
* 2. D0 ~ D499 is supported in PLC software version V1.3 and above, D7200 is the starting bit of the
corresponding software element when the address bit value is “0 ~ 499”in the following version.
* 3. D7264 ~ D7311 is supported only above V1.3 of PLC software, and D7200 ~ D7263 is the default for the
following versions.


                                                                                                            51
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




    Take the value He258 assigned to D8479 for example:




    As you can see from the image above:
    The corresponding decimal value of D8479 is, according to “Modbus TCP hold register
    allocation address table”, protect

Hold Register (D7200 for software below V1.3).
    2) D8479 has a corresponding decimal value of 7(up to 4 digits below V1.3) for client access
The number of hold registers for the.
  Therefore, the PLC soft component D400 ~ D511 corresponds to Modbus TCP register address
                                 0x00 ~ 0x6F for client access.
52
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Orientation control instructions
     AMX-FX3U Port Series PLC only AMX-FX3U-26mt-e support positioning control, the following
     brief description.

7.1 positioning control features
     High-speed pulse output (positioning control) supporting Y 0, y 1 co-2 axes;

     Maximum 100kHz pulse output per circuit;

     Support Mitsubishi PLSV, PLSY, PLSR, DRVA, DRVI, ZRN instructions;

     Support for PULSE + direction signal and forward and reverse pulse switching.

7.2 features
AMX-FX3U mesh port series PLC positioning functions used in the list of instructions
shown in the following table.
      Positioning
      instruction                         Function                                       Chapter
      Zrn DZRN                  Mechanical origin regression                              7.5.1
     PLSY/DPLSY                         Pulse output                                      7.5.2
     PLSV DPLSV                 Variable speed pulse output                               7.5.3
     PLSR/DPLSR        Pulse output with acceleration and deceleration                    7.5.4
     DRVI/DDRVI                     Relative positioning                                  7.5.5
    DRVA/DDRVA                      Absolute positioning                                  7.5.6

7.3I/O point allocation
AMX-FX3U mesh port series PLC positioning functions used in the list of instructions
shown in the following table.


     Function           Enter the number                                       Account for
                                                   Please connect at any
                                                   input.
Origin regression        All input points
                                                   If the input to the wiring is 0N, drive the ZRN instruction.
                                                   Please connect at any
                                                   input.
                                                   If the input to the connection is ON, drive the forward limit
                                                   flag bit.
 Positive                                          Depending on the pulse output, the positive turn limit flag
 transpose limit                                   bit is shown in the following table.
 (LSF)                   All input points                 Pulse output      Positive turn limit
                                                                Y zero             M8343
                                                                Y1                 M8353
                                                   Please connect at any
                                                   input.
                                                   If the input to the connection is ON, drive the reverse limit
                                                   flag bit.
                                                   Depending on the pulse output, the reverse limit flag bit is
                                     shown in the following table.
Inversion limit                                              Reverse limit
(LSR)             All input points         Pulse output      marker bit
                                                  Y zero           Delta 8464
                                                  Y1               Delta 8465




                                                                                53
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




                              Enter the                                      Account
    Function                   number                                          for
                                   Y
                                  zer
Pulse train signal                 o                Please connect the Y 0 ~ y 1 wire which is set to the output
                                                            of the pulse by the positioning instruction.
  (pulse output)                  Y1
                   Y 0 ~ y 1 corresponds to the
                   direction of the signal
                   On y 4 ~ y 5.                    Connect to the output of the signal specified by the
                     Pulse train       Direction    orientation instruction as the direction of rotation.
Direction signal       signal           signal      In the positioning instruction, the corresponding pulse train
   (direction of                                    signal for each channel has now been fixed
 rotation signal)      Y zero             Y4
                                                    Direction signal.
                                           Y
                        Y1                 -5

                                                    When the ZRN instruction is used to output the clear signal,
                                                    the wire is connected.
                                                    According to the ZRN instruction specified by the different
                                                    pulse output, the default reset signal
                                                    No. is shown in the
                                                    following table.
                                                             Pulse output         Clear signal
                                                                   Y zero              Y4
                                                                   Y1                  Y-5
                             All output             If the function is specified using a reset signal, a reset
   Clear signal               points                signal software component is available
                                                    Specify registers to specify any output corresponding to
                                                    each pulse output.
                                                    Depending on the output of the pulse, the soft part of the
                                                    reset signal specifies registers such as
                                                    The table below
                                                    shows.
                                                             Pulse output      Reset the Instruction register
                                                                   Y zero                    Delta 8464
                                                                   Y1                        Delta 8465

7.4 list of related software components
    The associated special auxiliary relays are shown in the following table. Y 0 and Y 1 are the soft
    components of the pulse output terminal.



Software component
      number                                                                       Object Instruction
                                   Name                    Attribute
 Y zero    Y1                                                               (supports 32-bit instructions)
      M8029      End of instruction execution flag bit Read only           ZRN/PLSY/PLSR/DRVI/DRVA
                  Busy/READY monitoring of pulse
 M8340     M8350  output                               Read only        ZRN/PLSY/PLSV/PLSR/DRVI/DRVA
 M8341     M8351     The clear signal output function is   Read only                     ZRN
                               effective
M8343   M8353               Positive limit              Read only          ZRN/DRVI/Drva
M8344   M8354               Reversal limit              Read only          ZRN/DRVI/Drva
M8348   M8358         Locating Command Drive             Read only     ZRN/PLSV/PLSR/DRVI/DRVA
                                                         Readable
M8349   M8359           Pulse stop command              and writable ZRN/PLSY/PLSV/PLSR/DRVI/DRVA
                  The function specified by the reset
M8464   M8465       signal soft component is valid                             ZRN
  The associated special data relays are shown in the following table. Y 0 and Y 1 are the soft
  components of the pulse output terminal.



                                                                                                  54
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




       Software
       component
       number                                                                             Object Instruction
                                      Name               Data Length Initial value
   Y zero        Y1                                                                  (supports 32-bit instructions)
 Delta 8140   Delta 8142
   (low)        (low)         Current Value Register
                                                           32 bits         0                 PLSY/PLSR
 Delta 8141   Delta 8143              [ PLS ]
   (high        (high
  position)    position)
 Delta 8340   Delta 8350
   (low)        (low)         Current Value Register
                                                           32 bits         0             Zrn PLSV Drvi Drva
 Delta 8341   Delta 8351              [ PLS ]
   (high        (high
  position)    position)
 Delta 8342   Delta 8352       Base velocity [ Hz ]        16 bits         0              ZRN/DRVI/Drva
 Delta 8343   Delta 8353
   (low)        (low)
                                Max speed [ Hz ]           32 bits        50k             ZRN/DRVI/Drva
 Delta 8344   Delta 8354
   (high        (high
  position)    position)
 Delta 8348   Delta 8358     Acceleration time [ ms ]      16 bits        100             ZRN/DRVI/Drva
 Delta 8349 Delta 8359      Deceleration Time [ MS ]       16 bits        100             ZRN/DRVI/Drva
                           Clear signal soft component
 Delta 8464 Delta 8465             designation             16 bits                               ZRN
 Delta 8380 Delta 8382 The number of steps in a circle     16 bits        200             ZRN/DRVI/Drva
 Delta 8381 Delta 8383       Step-driven subdivision       16 bits        32              ZRN/DRVI/Drva

Note: the number of steps per revolution multiplied by the step drive subdivision is the number of pulses per
revolution
Fi
fty
-
fiv
e
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

7.5 instructions
7.5.1. Mechanical origin regression -- ZRN instruction



     A command that causes a quick return to the origin.

                                                                                               Number of
Instructions   Function               Bits                           Instruction format          steps

   ZRN                                 16                                                           9
                 Origin
               regression                                ZRN
  DZRN                                 32                                                          17


                                                                   Character
                                Bit element                         element                   Constant
  Operands
                X           Y         M          S             T      C             D     K         H


                                                               ·      ·             ·     ·         ·
                                                               ·      ·             ·     ·         ·
                    · ·                      ·       ·
                      ·

               For the speed of origin regression, frequency range: 10 ~ 32,767
               Hz (BIN16 bit) , or 10 ~ 100,000 Hz (BIN32 bit) ;

               For specified crawling speed, enabled when origin signal is ON, range: 10 ~
               32,767(Hz) ;

               Dog origin signal input, where X signal response is the best;

               For specifying the port number of the pulse output, the AMX-FX3U mesh family can
               specify either y 0 or y 1.
56
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




Pulse output: AMX-FX3U-26MT-E supports y 0 ~ y 1 dual-axis output








    Sends a pulse to move the servo/stepping motor to the origin



When the DOG origin x 3 state changes from ON to OFF, Y 0 stops the pulse output and writes 0 to
   the current value register (y 0: [ D8341, D8340] , Y 1: [ D8350, D8351]) .

When M8341(reset signal output function) ON, output reset signal. Later, when the completion flag
   (M8029) is set to ON, the monitor in the pulse output (y 0: [ M8340, Y 1: [ M8350]) becomes
   OFF.



The current value register (32 bits) of the Y 0 output: [ D8341(high bit) , D8340(low bit)]
Current Value Register (32-bit) for Y 1 output: [ D8350(high bit) , D8351(low bit)]
Y 0 pulse output stopped (stop immediately) : M8349
Y 1 pulse output stopped (stop immediately) : M8359
Busy/READY: M8340
Busy/READY: M8350
Busy/READY: M8348
Busy/READY: M8358
Y 0 positive spin limit (BUSY/READY) : M8343
Busy/READY: M8344
Y 1 positive spin limit (BUSY/READY) : M8353
Y 1 inversion limit (BUSY/READY) : M8354
End of instruction execution flag bit: M8029
Base rate when executing ZRN instructions:
    Y 0 pulse output: D8342
    Y 1 pulse output: D8352
Set range: less than 1/10th of maximum speed, or 1/10th of maximum speed if above.




                                                                                     57
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

11. Maximum speed when executing ZRN instructions:
    Y 0 pulse output: [ D8344(high) , D8343(low)]
    Y 1 pulse output: [ D8354(high) , D8353(low)]

    Specify pulse output frequency, less than maximum speed, set range: 10 ~ 100,000 Hz
Acceleration and deceleration time when
   executing ZRN instruction (in MS-
   RRBY0:Pulseulse output acceleration
   tiD83488348
    Y1 pulse output acceleration time: D8358
    Y0 pulse output deceleration time: D8349
    Y1 pulse output deceleration time: D8359
    Acceleration time represents the time
    required to reach the base velocity to the
    maximum      velocity deceleration    time
    represents the time required to reach the
    maximum velocity to the base velocity

7.5.2. Pulse output -- PLSY instruction



     One-way quantitative pulse output instruction without acceleration or deceleration time
     variation.

                                                                                         Number of
Instructions    Function             Bits                  Instruction format              steps

   PLSY                               16                                                       7
               Pulse output                      PLSY
  DPLSY                               32                                                       13


                                                         Character
                               Bit element                element                       Constant
  Operands
                 X         Y          M      S   T           C            D         K          H


                                                 ·           ·            ·         ·          ·
                                                 ·           ·            ·         ·          ·
                                 ·
58
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



             For specifying pulse output frequency, range: 1 to
             32,767 Hz (BIN16 bit) , or 1 to 100,000 Hz (BIN32 bit) ;


             For specifying the number of output pulses, range: 1 ~
             32,767 pls (Bin16 bit) , or 1 ~ 2,147,483,647 pls (Bin32
             bit) ;

             For the port number of the specified pulse output, AMX-FX3U-26MT-E can specify
             either y 0 or y 1.









    When the number of pulses emitted reaches the specified value of the D0 register, the Y0 pulse
    output is stopped and the completion flag (M8029) is set to ON.



Y 0 output pulse number (32 bits, reduced when reversed) : [ D8141(high) , D8140(low)]
Y 1 output pulse count (32 bits, reduced when reversed) : [ D8143(high) , D8142(low)]
Y 0 pulse output stopped (stop immediately) : M8349
Y 1 pulse output stopped (stop immediately) : M8359
Busy/READY: M8340
Busy/READY: M8350
Y 0 positive spin limit (BUSY/READY) : M8343
Busy/READY: M8344
Y 1 positive spin limit (BUSY/READY) : M8353
Y 1 inversion limit (BUSY/READY) : M8354
End of instruction execution flag bit: M8029
59
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

7.5.3 variable speed pulse output-plsv instruction



     Variable speed pulse output instruction with rotation direction.
                                                                                                      Number of
Instructions     Function             Bits                         Instruction format                   steps

   PLSV                                16                                                                 7
               Variable speed
                                                         PLSV
                Pulse output
  DPLSV                                32                                                                13


                                                                 Character
                                Bit element                       element                         Constant
  Operands
                  X         Y         M          S       T          C             D           K           H


                                                             ·          ·               ·         ·           ·
                            ·
                            ·                ·       ·

                 To specify pulse output frequency, range:-32,7681 ~ 32,767 Hz
                 (except 0, BIN16 bit) , or-50,000 ~ 50,000 Hz (except 0, BIN32 bit) ,
                 where the minus sign represents the reverse direction

                 For the port number of the specified pulse output, AMX-FX3U-26MT-E can specify y 0
                 or y 1;


              Amx-fx3u-26mt-e can specify y 4 or y 5 as the rotation direction signal,
and the output signal is ON, running in the forward direction, or vice versa, to specify
the rotation direction signal output port number or bit variable.




Note: For PLC software versions V1.3 and below, the directions must specify y 4 and Y 5, respectively, with
output ports Y 0 and Y 1.




  When the direction of rotation is specified, the output port number Y4 = on represents the
  positive direction



                                                                                               60
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




The current value register (32 bits) of the Y 0 output: [ D8341(high bit) , D8340(low bit)]
Current Value Register (32-bit) for Y 1 output: [ D8351(high bit) , D8350(low bit)]
Y 0 pulse output stopped (stop immediately) : M8349
Y 1 pulse output stopped (stop immediately) : M8359
Busy/Ready: M8340
Busy/Ready: M8350
Busy/READY: M8348
Busy/READY: M8358
Acceleration and deceleration enabled: M8338
Base speed during acceleration and deceleration of PLSV command:
    Y 0 pulse output: D8342
    Y 1 pulse output: D8352
    Set range: less than 1/10th of maximum speed, or 1/10th of maximum speed if above
Max speed (in MS-RRBY : y 0 pulse
    outputD83448344(high) , D8343(low)] y 1 pulse
    outputD83548354(highD83538353(low)]


    Specify pulse output frequency, less than maximum speed, set range: 10 ~ 100,000 Hz
Acceleration and deceleration time
    when PLSV command is
    executed: Y0 pulse output
    acceleration time: D8348 Y1
    pulse output acceleration time:
    D8358
    Y0 pulse output deceleration time: D8349
    Y1 pulse output deceleration time: D8359
    Acceleration time represents the time
    required to reach the base velocity to the
    maximum      velocity deceleration    time
    represents the time required to reach the
    maximum velocity to the base velocity
61
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

7.5.4. Pulse output with acceleration and deceleration -- PLSR instruction



     Pulse output command with acceleration and deceleration function.

                                                                                             Number of
Instructions    Function             Bits                       Instruction format             steps

   PLSR                               16                                                          9
                   Belt
               acceleration
                   and
               deceleration
                                                 PLSR
               Pulse output
  DPLSR                               32                                                         17


                                                              Character
                               Bit element                     element                      Constant
  Operands
                 X         Y          M      S          T         C            D        K         H


                                                        ·         ·            ·        ·         ·
                                                        ·         ·            ·        ·         ·
                                                        ·         ·            ·        ·         ·
                                 ·

                The highest frequency of a specified pulse output, in the
                range of 10-32,767 Hz (BIN16 bit) , or 10-50,000 Hz (BIN32
                bit) ;


                For specifying the number of output pulses, range:
                1-32,767(Bin16 bits) , or 1-2,147,483,647(Bin32 bits) ;

                For the specified acceleration and deceleration time, the range: 50 ~ 5000(units: MS) ,
                note the same acceleration and deceleration time;

                For the port number of the specified pulse output, AMX-FX3U-26MT-E can specify
                either y 0 or y 1.
62
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan









    2 seconds to reach, the specified 1000 Hz frequency pulse, running for a period of time, after,
    the specified deceleration time 2 seconds to stop the loss

    Total number of output pulses issued at the same time.




The current value register (32 bits) of the Y 0 output: [ D8141(high bit) , D8140(low bit)]
Current Value Register (32-bit) for Y 1 output: [ D8143(high bit) , D8142(low bit)]
Y 0 pulse output stopped (stop immediately) : M8349
Y 1 pulse output stopped (stop immediately) : M8359
Busy/Ready: M8340
Busy/Ready: M8350
Busy/READY: M8348
Busy/READY: M8358
End of instruction execution flag bit: M8029
63
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

7.5.5. Relative positioning -- DRVI instruction



     Single-segment pulse control instruction for relative positioning.

                                                                                                Number of
Instructions    Function             Bits                            Instruction format           steps

   Drvi                               16                                                             9
                Relative
               positioning                              Drvi
  DDRVI                               32                                                            17


                                                                   Character
                               Bit element                          element                    Constant
  Operands
                X          Y         M          S              T      C             D      K         H


                                                               ·      ·             ·      ·         ·
                                                               ·      ·             ·      ·         ·
                           ·
                           ·                ·       ·

               To specify the number of output pulses, range:-32,768 ~
                32,767(except 0, BIN16 bit) , or-999,999 ~ 999,999 Hz (except 0,
                BIN32 bit) , where the minus sign represents the reverse direction;


               To specify pulse output frequency, range: 10 ~ 32,767
               Hz (BIN16 bit) , or 10 ~ 100,000 Hz (BIN32 bit) ;

               For the port number of the specified pulse output, AMX-FX3U-26MT-E can specify y
               0 or y 1;


              Amx-fx3u-26mt-e can specify y 4 or y 5 as the rotation direction signal,
and the output signal is ON, running in the forward direction, or vice versa, to specify
the rotation direction signal output port number or bit variable.
64
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




Note: For PLC software versions V1.3 and below, the directions must specify y 4 and Y 5, respectively, with
output ports Y 0 and Y 1.






              Specify the 30000pls Pulse, when the direction of rotation signal output port number
              Y5 = on, representing the positive direction
The number of output pulses is relative (y 0, Y 1) to the current value register as relative position:
    The current value register (32 bits) of the Y 0 output: [ D8341(high bit) , D8340(low bit)]
    Current Value Register (32-bit) for Y 1 output: [ D8350(high bit) , D8351(low bit)]
Instructions can be used multiple times in a program, but do not print to the same port at the same
     time

Changes the operand content during instruction execution, only the next time the instruction is
     executed

Deceleration stops when the drive contact is OFF during instruction execution. At this point, M8029,
     the end of instruction execution flag, does not act.

When the monitoring (BUSY/READY) in the pulse output is ON, the positioning instructions using
     that output can not be executed.

Do not execute positioning instructions (including PLSY) that specify the same
    output number, even if the instruction-driven contact is OFF and the pulse
    output is monitored (BUSY/READY) ON.




The current value register (32 bits) of the Y 0 output: [ D8341(high bit) , D8340(low bit)]
Current Value Register (32-bit) for Y 1 output: [ D8350(high bit) , D8351(low bit)]
Y 0 pulse output stopped (stop immediately) : M8349
Y 1 pulse output stopped (stop immediately) : M8359
Busy/Ready: M8340
Busy/Ready: M8350
Busy/READY: M8348
Busy/READY: M8358
End of instruction execution flag bit: M8029



                                               65
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan


Base Speed: Y 0 pulse output:
    D8342 when executing DRVI,
    DRVA instructions
    Y 1 pulse output: D8352
    Set range: less than 1/10th of maximum speed, or 1/10th of maximum speed if above
Maximum speed when executing the DRVI, DRVA instructions (in MS) :
    Y 0 pulse output: [ D8344(high) , D8343(low)]
    Y 1 pulse output: [ D8354(high) , D8353(low)]

    Specify pulse output frequency, less than maximum speed, set range: 10 ~ 100,000 Hz
When executing DRVI, DRVA
   instruction, acceleration and
    deceleration time: y 0 pulse
    output acceleration time: D8348
    Y1 pulse output acceleration time: D8358
    Y0 pulse output deceleration time: D8349
    Y1 pulse output deceleration time: D8359
    Acceleration   time   represents   the   time
    required to reach the base velocity to the
    maximum      velocity deceleration    time
    represents the time required to reach the
    maximum velocity to the base velocity
66
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

7.5.6. Absolute positioning -- the drva directive



     Single-segment pulse control instruction for relative positioning.

                                                                                               Number of
Instructions    Function             Bits                            Instruction format          steps

   Drva                               16                                                            9
                Absolute
               positioning                              Drva
 DDRVA                                32                                                           17


                                                                   Character
                               Bit element                          element                   Constant
  Operands
                X          Y         M          S              T      C             D     K         H


                                                               ·      ·             ·     ·         ·
                                                               ·      ·             ·     ·         ·
                           ·
                           ·                ·       ·

               For specifying absolute (target) positions, range:-32,768 ~
               32,767(except 0, Bin16 bits) , or-999,999 ~ 999,999 Hz (except 0, Bin32
               bits) ;


               To specify pulse output frequency, range: 10 ~ 32,767
               Hz (BIN16 bit) , or 10 ~ 100,000 Hz (BIN32 bit) ;

               For the port number of the specified pulse output, AMX-FX3U-26MT-E can specify y
               0 or y 1;

                                   Amx-fx3u-26mt-e can specify either y 4 or


Y 5 is the direction of rotation signal, depending ON the difference from the current position.
When the output port state is ON, it is running forward; when the state is OFF, it is running
backward.
67
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




Note: For PLC software versions V1.3 and below, the directions must specify y 4 and Y 5, respectively, with
output ports Y 0 and Y 1.





    To specify the target point of the 30000pls Pulse, when the rotation is specified
    Direction signal output port Y5 = on, positive direction
The number of output pulses is relative (y 0, Y 1) to the current value register as relative position:
    The current value register (32 bits) of the Y 0 output: [ D8341(high bit) , D8340(low bit)]
    Current Value Register (32-bit) for Y 1 output: [ D8350(high bit) , D8351(low bit)]
Instructions can be used multiple times in a program, but do not print to the same port at the same
     time

Changes the operand content during instruction execution, only the next time the instruction is
     executed

Deceleration stops when the drive contact is OFF during instruction execution. At this point, M8029,
     the end of instruction execution flag, does not act.

When the monitoring (BUSY/READY) in the pulse output is ON, the positioning instructions using
     that output can not be executed.

Do not execute positioning instructions (including PLSY) that specify the same
    output number, even if the instruction-driven contact is OFF and the pulse
    output is monitored (BUSY/READY) ON.




The current value register (32 bits) of the Y 0 output: [ D8341(high bit) , D8340(low bit)]
Current Value Register (32-bit) for Y 1 output: [ D8350(high bit) , D8351(low bit)]
Y 0 pulse output stopped (stop immediately) : M8349
Y 1 pulse output stopped (stop immediately) : M8359
Busy/Ready: M8340
Busy/Ready: M8350
Busy/READY: M8348



                    68
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan


Busy/READY: M8358
End of instruction execution flag bit: M8029
Base speed when executing DRVI, DRVA instructions:
    Y 0 pulse output: D8342
    Y 1 pulse output: D8352
    Set range: less than 1/10th of maximum speed, or 1/10th of maximum speed if above.
Kill. Maximum speed when executing the DRVI, DRVA instructions:
    Y 0 pulse output: [ D8344(high) , D8343(low)]
    Y 1 pulse output: [ D8354(high) , D8353(low)]

    Specify pulse output frequency, less than maximum speed, set range: 10 ~ 100,000 Hz
Acceleration and deceleration time (ms) : Y 0 pulse
   output acceleration time: D8348 when DRVI
    and DRVA instructions are executed
    Y1 pulse output acceleration time: D8358
    Y0 pulse output deceleration time: D8349
    Y1 pulse output deceleration time: D8359
    Acceleration time represents the time
    required to reach the base velocity to the
    maximum      velocity deceleration    time
    represents the time required to reach the
    maximum velocity to the base velocity
69
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Appendix A, AMX-FX3U Mesh Port Series PLC support instruction
table

  Instruction         Instruction
     type             Code                                    Functional description                  Notes
                LD                  Get (start of logical operation of a contact)
                LDI                 Get Back (start of logical operation of B contact)
                                    Take the rising edge of the pulse (start of operation to detect
                LDP                 the rising edge)
                                    Take the falling edge of the pulse (the beginning of the
                LDF                 operation to detect the falling edge)
                AND                 With (series a contact)
    Contact     Ani                 With non (Series B contacts)
  instruction                       Connected in series with the rising edge of the pulse
                ANDP                (detecting the rising edge)
                                    Connected in series with the pulse falling edge (detecting
                ANDF                falling edge)
                Or                  Or (parallel a contact)
                Ori                 Or not (parallel B contact)
                                    Or pulse rising edge (parallel connection to detect rising
                Orp                 edge)
                ORF                 Or pulse drop edge (parallel connection to detect drop edge)
                ANB                 To connect (a Circuit Block in series)
                Orb                 Circuit block or (parallel connection of Circuit Block)
  Combined      MPS                 Stack Access (arithmetic storage)
  instruction
                MRD                 Read Stack (read memory)
                MPP                 Out of the stack (read out storage and reset)
                INV                 Inversion of the result of an operation
                Out                 Output (coil driven)
                Set                 Position (action hold)
    Output
  instruction   RST                 Reset (UNHOLD action, current value and register clearing)
                PLS.                Rising pulse (rising edge pulse output)
                PLF                 Down Pulse (down edge pulse output)
   Master       MC                  Master Control (coil instruction for universal series contacts)
  Command
                MCR                 Master Reset (Universal series contact release instruction)
    Other
  commands      Nop                 No program (empty operation)
                                    End of program (end of program and input/output processing,
End instruction END                 and return 0 steps)
 Step ladder
   diagram      STL                 Step ladder diagram (the beginning of a step ladder diagram)
      令         Ret                 Return (end of step ladder diagram)
                CJ                  Conditional jump
                CALL                Subroutine call
               Sret   Subroutine return
Program flow
               FEND   Main program terminated
               For    The beginning of the looping range
               Next   The end of the loop range



                                                           70
Dongguan AMX Automation Technology                   AMX-FX3U net port series programmable
Co. , Ltd.                                           controller manual


            MOV          Teleport
            Smov         Dislocated
            Hey, CMP     Comparison
                         Interval
            ZCP          comparison
                         Reverse
Transmission
             CML         transmission
 comparison
                         Batch
            BMOV         transmission
                         Multipoint
            Fmov         transmission
            XCH          Swap
                         BCD
            BCD          conversion                                          Pulse-type
                         Bin                                                 instruction only
            BIN          conversion                                          There is a version
                                                                             in PLC software
            Add          Bin addition                                        V1.3 and above
                         Bin                                                 support
            Sub          subtraction
                         Bin
            Mul          multiplication
            Div          Bin Division
 Four. Logic Inc.        Bin plus one
 Arithmetic              Bin Minus
  operation Dec.         One
            Wand         Logic and
            Wor          Logic or
            WXOR         Exclusive or
                         Complementa
            NEG          ry code
                         Contact
                         comparison
            LD =         LD               S1 = S2
                         Contact
                         comparison
            LD >         LD               S1>s2
                         Contact
                         comparison
            LD <         LD               S1 < S2
                         Contact
                         comparison
            LD < >       LD               S 1≠ s 2
                         Contact
                         comparison
            LD < =       LD               S 1≤ s 2
                         Contact
                         comparison
            LD > =       LD               S 1≥ s 2
                         Contact
                         comparison
            And =        AND               S1 = S2
                       Contact
                       comparison
             AND >     AND           S1>s2
                       Contact
                       comparison
             And <     AND           S1 < S2
  Contact              Contact
comparison             comparison
             And < >   AND           S 1≠ s 2
                       Contact
                       comparison
             And < =   AND           S 1≤ s 2
                       Contact
                       comparison
             AND > =   AND           S 1≥ s 2
                       Contact
                       comparison
             OR =      OR           S1 = S2
                       Contact
                       comparison
             OR >      OR           S1>s2
                       Contact
                       comparison
             Or <      OR           S1 < S2
                       Contact
                       comparison
             Or < >    OR           S 1≠ s 2
                       Contact
                       comparison
             Or < =    OR           S 1≤ s 2
                       Contact
                       comparison
             OR > =    OR           S 1≥ s 2




                                                71
                                                               AMX-FX3U net port series programmable
Dongguan AMX Automation Technology Co. , Ltd.                  controller manual


                Ror         Cyclic right shift
                Whoa, Whoa,
                whoa        Cyclic left shift
                RCR           Carry cycle right shift
 Cycle. Shift
                                                                                           Pulse-type
                RCL           Carry cyclic left shift                                      instruction only
                                                                                            There is a version
                SFTR          Shift right                                                    in PLC software
                                                                                           V1.3 and above
                SFTL          Shift left                                                   support
                Zrst          Batch reset
     Data
  Processing    Mean          Mean value
                              Bin integer-binary floating
            Flt               point number conversion
 High-speed
 processing Reff              Filter adjustment
                ZRN           Mechanical origin regression
                PLSY          Pulse output
 Positioning PLSV             Variable Speed Pulse                                              Two-word
   control                    Pulse output with acceleration                               instruction support
             PLSR             and deceleration
                Drvi          Relative positioning
                Drva          Absolute positioning
                              Binary floating point number
                DECMP         comparison
                              Interval comparison of binary
                DEZCP         floating-point numbers
                              Binary floating-point data
                Demov         transfer
                DEBCD         Binary-to-decimal floating-point conversion
                Debin         Decimal floating-point to binary floating-point conversion
                              Binary floating-point number
                DEADD         addition
  IEEE 754-
 2008: IEEE
 Standard for
Floating-Point                Binary floating-point number
  Arithmetic DESUB            subtraction
                              Binary floating-point
                DEMUL         multiplication
                              Binary floating-point number
                DEDIV         division
                              Binary floating-point number-
                INT           BIN integer conversion                                       Pulse-type
                              Binary floating point number                                 instruction only
                DSIN          SIN operation                                                 There is a version
                                                                                             in PLC software
                               Binary floating-point COS
                                                                                           V1.3 and above
                DCOS           operation
                                                                                           support
                DTAN          Binary floating point number
                     TAN operation
   Data
Processing 2 Swap    Up and down byte conversion
             TCMP    Clock data comparison
             TZCP    Clock data interval comparison
  Clock      Tadd    Clock data addition
 operation
             Tsub    Clock data subtraction
             TRD     Clock readout
             Twr     Clock data write
             Gry     Gray code’s transformation
Peripheral
equipment    Gbin    Gray code’s reversal
             ADPRW   Modbus read write



                                                      72
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Appendix B, Modbus RTU communication error code (D8402 data)
explanation
Modbus
communic
ation                                                           Action of related software
 Message                   Error name                Master/Sla   components (special
Error Code                                           ve Station                                   Disposal mode
                         And the details                             M, D address)
 (decimal)
                                                                  1) M8063 will be ON, 6321
                                                                  Will be stored in D8063
                                                                    2) M8122 will be set to
             ADP did not detect an error in Modbus                   ON, communication
             communication                                                                     Please confirm that it
                                                     Master/Sla The error code is stored       has been used
   201                                               ve Station                                      Modbus
                                                                                                  communication
             Detection of Modbus Communication                    In D8122                            adapter
             Adapter failed                                          3) M8123 will be set to
                                                                        ON, with an error
                                                                  Details will be stored
                                                                  In D8123
                                                                                               Please confirm the
             Modbus communication parameter                                                    relevant data sent
             setting exception                                                                 Register parameter
                                                     Master/Sla                                values, please
   202                                               ve Station            See above             Confirm Modbus
                                                                                                  communication
             The Modbus communication                                                                  device
             parameter setting is invalid
                                                                                               Fixed program
             Communication port occupied by
             other communication
             More than two types of
             communication are set up in one                                                   Confirm the Modbus
             channel                                 Master/Sla                                    communication
   203                                               ve Station            See above           Is there only one
                                                                                               channel
             Example: Modbus communication is
             used on the same channel
             Letters and n: N Networks)
                                                                                               Please confirm
                                                                                               communication
             Parity error, overflow error, frame     Master/Sla                                format
   204       error                                   ve Station            See above
                                                                                               D8400/D8420
                                                                                               Please confirm
                                                                                               communication
             CRC/LRC error                                                                     format
                                                                                               D8120, delay in
                                                                                               playback
             The text is long in CRC/LRC invalid     Master/Sla                                Delta 8180, request
   205       RTU mode                                ve Station            See above           delay
             Degree for 3 bytes or less, ASCII                                                 An error occurred on
             mode language                                                                     D8174
             This is less than 8 bytes in length                                               态
      Character overflow                                           Please confirm the
                                                                   delay
                                                                   Delta 8180, request
      - when receiving more than 256 bytes                         delay
      in RTU mode
                                                                   Error in Delta 8174
                                          Master/Sla
                                                                   Status of occurrence.
206   (ASCII mode is more than 513 bytes) ve Station   See above
                                                                   Please confirm
                                                                   Is the
                                                                   communication port
      - during the processing of the previous
                                                                   set up
      request, the
                                                                   Correct
      Other requests (slave only)




                                                                                      73
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



                                                                            Please confirm
                                                                            whether the slave
                                                                            station
                                                                            Using Modbus
                                                                            communication,
          The request text is not in the correct                            Is receiving the
          format                                                            correct
          The number of access points to receive                            Function, confirm
          text and the actual point received                                command
                                                   Master/Sla               Is the number of
    207   The numbers don’t match                  ve Station   See above   access points in the
                                                                            Range of slave and
                                                                            master stations
          Or the number of access points
          exceeds the function’s maximum
          value                                                             内
                                                                            . If not compiled
                                                                            correctly
                                                                            Cheng, it sometimes
                                                                            happens
                                                                            Protocol error
                                                                            Refer to error code
          Receiving text error.                    Master/Sla               207
    208                                            ve Station   See above
          ASCII mode can not be converted to
          Byte Code                                                         To be disposed of
                                                                            Please confirm the
          Received without corresponding                                    work used
          function code                                                     Can you match it to
                                                     Slave                  the primary site and
    209
          The requested function code is invalid    station     See above   the
          or does not correspond                                            Specification of
                                                                            slave station
                                                                            Please confirm your
                                                                            station
                                                                            Modbus soft
                                                                            component
                                                                            allocation
                                                                            If It’s set correctly.
          To the undistributed software
          components Modbus software
          components into
                                                                            Please confirm that
                                                                            the master station
          All Right, interview                                              data is
          Selected Modbus software component         Slave                  Not in the selected
    210   or software component + access            station     See above   function has
          Points exceeded                                                   Range of effect
          The support range of the slave station
                                                                            Please confirm that
                                                                            the main site is
                                                                            visited
                                                                            I asked for a valid
                                                                            software component
                                                                            range
                                                                     围
                                                                     Please confirm the
                                                                     number from this
                                                                     site
                                                                     And the
                                                                     communication
                                               Master                parameters are
211   Slave response timeout                   station   See above   positive
                                                                     The right setting
      Exception response text receive
      The exception response text was sent
      from the site (see below
      Abnormal response of plane                                     Please confirm the
                                                                     work used
      Code)                                                          Can be compared
                                                                     with the function
                                                                     parameters
                                                                     That match the
                                               Master                primary and
212                                            station   See above   secondary sites
      Details:
                                                                     Specifications
      High-bit byte: exception function code

      Low-bit byte: exception response code




                                                                                          74
                                                              AMX-FX3U net port series programmable
Dongguan AMX Automation Technology Co. , Ltd.                 controller manual



           The station
           numbers
           don’t match
           The request and response text are not
           aligned from the site number
                                                                                     Please refer to the
                                                    Master                           error code
     213                                            station         See above
           Details:                                                                  Disposal of 0207
           High-bit byte: the requested number
           from the site
           Low-bit byte: the number of the
           response from the site
           The function code is
           inconsistent
           The request text and the response text
           have different functional codes
           致                                                                         Please refer to the
                                                    Master                           error code
    214                                             station         See above
                                                                                     Disposal of 0207
           Details:
           High-bit byte: the function code for
           the request text
           Low-bit byte: function code that
           responds to text
           Error in play
           request
           Received from the station playback
           function does not support the function
                                                                                     Please confirm
                                                                                     whether the function
           Play request                                                              is in the
                                                                                     Within the scope of
                                                     Slave                           the slave station
     215   Details:                                 station         See above        specification
                    Non diagnostic Diagnostic
                        function       function                                      Okay, play it
                                      Functional
           High Byte:        0           Code
                                       (08H)
           Low-bit byte: Function Subfunction
           Code                          Code
           Request text data
           exception
           The data values do not agree with the
           Modbus specification.                                                     Please refer to the
                                                     Slave                           error code
     216                                            station         See above
           (for example: off = [0000H ] , on =                                       Disposal of 0207
           [ FF00H ]
           Write to [5h ] value)
                                                                                     Please use the
           Incorrect use of the                                                      ADPRW at the main
           ADPRW instruction                         Slave                           site
     217                                            station         See above
           The ADPRW instruction                                                     Instructions
      is used at the slave
      station
      Out of range of application instruction
      operand data
      Read/write object softcell for the
      ADPRW instruction
      The item is invalid. or the
      number of points
      occupied                                             Refer to the above or
                                                                                     Please confirm
                                                                                     whether the function
      Out of range                                                                   is in the
                                                                                     Master station
                                                 Master                              specifications or
218                                              station   M8067 will be ON, 6705 or software components
                                                                                     To the extent of the
      Details:                                             6706 will be stored       law
      High Byte:    0                                      D8076 in progress
                    S.S4D according to RS
      Low Byte: instructions
      The invalid parameter is
      stored 1-4
                                                             The length of the data Refer to error code
      The data length is                        Master/Sla received does not match 207
219   incorrect                                 ve Station Modbus specification     To be disposed of




                                                                                                          75
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan



The exception response code for the Modbus slave station (details of the master station error, data in D8403)

   Exception
 response code         Exception response code name
                                                              The requested function code does not correspond
     01H                  Functional code exception           to a slave station
                                                              The requested Modbus software component or
                                                              access point exceeds the slave
     02H                  Soft component anomaly
                                                              The effective range of the
                                                              One data region of the request text exceeds the
                                                              valid range (data
     03H                        Data Anomaly
                                                              Length, number of soft components)
                                                              A fatal error occurred while processing the
                                                              request text from the station
     04H                     Processing interrupt
                                                              Go wrong
     0CH             I/0 error in sending or receiving data   Incorrect length of data received or CRC error
76
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Appendix C, some examples of the application of analog quantity
Appendix C-1. Analog input
Additional basics:
     The analog signals (such as temperature and humidity, pressure, weight, CO2 concentration, etc.) that
the user needs to collect are collected by related sensors (such as temperature and humidity sensors,
weighing sensors, PT100 temperature sensors, etc.) , through its internal conversion into current or voltage
signal (output signal has different range, common have 0 ~ 20ma, 4 ~ 20ma, 0 ~ 10V, etc.) , access to the
PLC analog input channel, and PLC converts the voltage/current analog signal into digital signal through a/D
conversion circuit, then it can be used for MCU calculation.
     For this PLC, it can accept analog signal input in the range of 0 ~ 10V or 0 ~ 20ma, and then directly use
the value of the corresponding channel address (D8030, D8031) of the analog input channel (IN1, IN2) , the
PLC program which is calculated according to the linear relationship between the analog quantity and the
PLC digital quantity (D8030, D8031) can be used on the host computer, configuration or touch screen
connected with the PLC, the following four cases are explained by the range of the output voltage/current of
the sensor relative to the input range of the PLC analog quantity.

Note: for illustrative purposes, the decimal in the following calculation is to the fourth place after the decimal
point. In case 1, the result of dividing 2047 by 500 is an infinite decimal, and the result of keeping the fourth
decimal point in case 1 is 0.2443.




      Suppose there is such a weighing sensor: can measure weight 0 ~ 500g, output analog 0 ~
10V voltage signal, access to PLC analog input channel 1, then analog and PLC digital linear
relationship (ideal state) :




     If the weight sensor is Y and the PLC analog input channel is X, the linear equation is:

                                                2047K 500
                                                  Solution: K ≈0.2443
     So the relationship between analog quantity and digital quantity in this case is y = 0.2443x.
77
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

     You can refer to the following routine:




     Suppose there is such a weighing sensor: can measure weight 0 ~ 200g, output analog 5 ~
10V voltage signal, access to PLC Analog Input Channel 1, then the linear relationship between
analog quantity and PLC digital quantity (ideal state, corresponding to the lower limit of the range
of digital quantity, is based on the sensor output
Voltage signal and digital quantity ratio “55V corresponding to digital quantity”calculated) :
                                  10,20,47




     If the weight sensor is Y and the PLC analog input channel is X, the linear equation is:

                                                  1024k B0
                                                  2047K b 200

                                           Solution:
                                                K 0.1955


     So the relationship between analog quantity and digital quantity in this case is y = 0.1955x-
     200.192.
78
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan


    You can refer to the following routine:




                                                                                        79
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




     Suppose there is such a temperature sensor: the temperature can be measured 0 ~ 300 °C, the
analog output 0 ~ 20ma current signal, access to the PLC analog input channel 1, then analog and
PLC digital linear relationship (ideal state) :




     If the temperature sensor picks up a weight of Y, and the PLC analog input channel number of
     X, then you get linear equation:

                                              2047K 300
                                                  Solution: K ≈0.1466
     So the relationship between analog quantity and digital quantity in this case is y = 0.2443x.
     You can refer to the following routine:
80
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




     Suppose there is such a temperature sensor: the temperature can be measured 0 ~ 200 °C, the
analog output 4 ~ 20 ma current signal, access to the PLC Analog Input Channel 1, then the linear
relationship between analog quantity and PLC digital quantity (ideal state, corresponding to the lower
limit of digital quantity range, is based on the sensor input
The ratio of the output current signal to the digital quantity “44ma corresponding digital quantity”is obtained:
                                     20,20,47




     If the temperature sensor picks up a weight of Y, and the PLC analog input channel number of
     X, then you get linear equation:

                                     409k B0
                                     2047K b 200

                               Solution:
                                     K 0.1221
                                     B 49.9389

     So the relationship between analog quantity and digital quantity in this case is y = 0.1221x-
     49.9389.
     You can refer to the following routine:
81
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Appendix C-2. Analog output
     Suppose there is such a inverter: from the PLC into analog 0 ~ 10V or 0 ~ 20ma current signal,
that is, the frequency of the inverter 0 ~ 50hz frequency change can be controlled, its analog input
channel into the PLC analog output channel, the linear relationship between analog and PLC digital
quantities (ideal) :




     If the frequency x of the inverter and the digital quantity of the analog output
     channel of the PLC is Y, the linear equation is obtained:

                                            50k, 4095
                                           Solution: K = 81.9
     So the relationship between analog quantity and digital quantity is y = 81.9x.
     You can refer to the following routine:
82
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Appendix D, part of the touch screen/PC side network interface
communication settings example
Explanation:
    There are many touch screen/PC brands and even product lines on the market. I Can’t give
you an example here, but the communication settings are pretty much the same:
    A. To set up the correct communication protocol, when the MC protocol communicates,
    select words like “FX3 Ethernet”or “FX Series”
      Ethernet”(definitely not “FX5”or “FX5U”) protocol
    B. Set the correct touch screen/host computer, PLC IP and port number (PLC default IP is
    192.168.1.18, MC protocol
      Port number 5551 when communicating, Modbus TCP communication protocol port
      number 502)

Some examples of communication settings:

1. And Kunlun MCGS embedded version (version 7.7) connected




    Open the device window on the MCGS engineering workbench and open the “Device
    toolbox”according to the picture above.




    Add the selected device “Universal TCP/IP parent device”.
83
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan


I.MC




    Then steps 1 and 2 add “Universal TCP/IP parent device”and “FX3”to the device toolbox.




                                                                                             84
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    In the “Universal TCP/IP parent device properties edit”window, set the computer IP, PLC IP and
    port number (5551) , and save it.
85
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan


II.MODBUS TCP protocol communication




    Then steps 1 and 2 add “Generic TCP/IP parent device”and “MODBUSTCP”to the device
    toolbox.




                                                                                        86
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    In the “Universal TCP/IP parent device properties edit”window, set the computer IP, PLC IP and
    port number (5551) , and save it.
87
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


2. I.MC communication with the display
touch screen (software version Sktool7.0)




    Select the connection protocol “MELSEC-FX3U (Ethernet)”through the port properties
window, set the PLC’s IP address and port number “5551”and save.



                                                                                         88
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication




     Select the connection protocol as “Modbus Master TCP/IP”through the “Communication
port properties”window, set the IP address and port number “502”of PLC and save it.




                                                                                          89
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


3. I.mc communicates with the profius touch screen
(software version GP-Pro EX 4.08)




    In   “Engineering    windows-peripheral     device   settings-controller/PLC-CONTROLLER/PLC
changes”, select manufacturer, Series, and port as “Mitsubishi Electric Corporation”, “FX Series
Ethernet”, and “Ethernet (TCP)”(if a new project has been set to ignore this step) .




                                                                                              90
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    The PLC IP address, with the port number “5551”through the “Specific controller
    settings”window filled in.




                                                                                        91
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication




     In “Engineering window-external device settings-controller/PLC-CONTROLLER/PLC changes”,
the manufacturer, serial port and port are selected as “MODBUS-IDA”and “General Modbus TCP
Master”respectively.
92
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    The PLC IP address, with the port number “502”through the “Specific controller
    settings”window filled in.




                                                                                        93
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

4. Connect to Weilun touch screen
I.MC
1) Software EB8000 Project Manager, V4.43




    The PLC type in the device properties is set to “Mitsubishi FX3U (Ethernet)”, the interface type is
    Ethernet, and IP settings are made.




                                                                                                      94
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




    The PLC IP address, with the port number “5551”through the “IP address settings”window
    filled in and saved.




                                                                                        95
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

2) software EasyBuilder Pro, V6.04.01




    The PLC type in the device properties is set to “Mitsubishi FX3U (Ethernet)”, the interface type is
    Ethernet, and IP settings are made.




    The PLC IP address, with the port number “5551”through the “IP address settings”window
    filled in and saved.
96
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication
1) Software EB8000 Project Manager, V4.43




    The device properties have the PLC type set to “Modbus TCP/IP (Ethernet)”, the interface type to
    Ethernet, and IP settings.




    The PLC IP address, with the port number “502”through the “IP address settings”window
    filled in and saved.
97
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

2) software EasyBuilder Pro, V6.04.01




    The device properties have the PLC type set to “Modbus TCP/IP (Ethernet)”, the interface type to
    Ethernet, and IP settings.




    The PLC IP address, with the port number “502”through the “IP address settings”window
    filled in and saved.
98
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


5. Connect to the touch screen (software version
of Touch Master V2.1) for I.MC communication




     Select “Connection type”as “Direct connection (Ethernet)”and “Melsec-FX3U (MC-
Protocol)”from the “Connection properties”window. Set the PLC IP address and port number
“5551”and save it.
99
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication




    Select “Connection type”as “Direct connection (Ethernet) , connection protocol as
“Modbus/Device (TCP/IP)”from the “Connection properties”window, set the PLC IP address
and port number “502”and save it.
100
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

6. Connect to kingview (version 6.55)
I.MC




    After opening kingview to create a new project, create the “Mitsubishi FX3U 16M”protocol as
    shown in steps 1-5 above, and then follow the following steps
Step.




    Enter the IP address and port number 5551 of the ETH-FX-2P module, separated by a colon (for
    further IP setup rules, please
101
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan


Click on address help.




    Click next and wait until you’re done.




                                                                                       102
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication




    After opening kingview to create a new project, create a new “MODBUSTCP-TCP”protocol as
    shown in steps 1-5 above, and then proceed to the next step.




    Enter the IP address and port number 502 of the ETH-FX-2P module, separated by a colon,
separated by a space, separated by a device address 1, and separated by a”/”delay time of 1
second (for further IP setup rules, click on address help) .
103
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation Technology
Co. , Ltd. . Dongguan




   Click next and wait until you’re done.




                                                                                       104
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Kill. Communicating with the I.MC (software version
Kinco DTools v3.4)




    Open the “System parameter settings”window to set up the touch screen IP, the
    manufacturer of the device parameter select “Mitsubishi”,
The communication protocol select “Mitsubishi F X Series Ethernet (TCP Slave)”and then fill in the
PLC’s IP address and port number “5551”to save the settings.
105
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication




     Open the “System parameters”window to set the touch screen IP, the manufacturer of the
device parameters select “Modbus”, the communication protocol select “Modbus TCP Slave”,
then fill in the PLC IP address and port number “502”to save the settings.
106
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

8. Connect to Omron touch screen (software version NB-Designer V1.4)




    Select the user touch screen icon from component library window-HMI, click and drag the
    HMI icon to the design window.

I.MC




     Select the Mitsubishi F X Series Ethernet (TCP Slave) icon from component library window-PLC,
and click to select the drag icon to the design window.
107
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan




   Open “PLC properties-network device configuration”, add the PLC IP address and port
number “5551”, as well as the touch screen after saving the IP address exit.




                                                                                         108
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan

II.MODBUS TCP protocol communication




    Select the “Modbus TCP Slave”icon from component library window-PLC, click and select
    the drag icon to the design window.




   Open “PLC properties-network device configuration”, add the PLC IP address and port
number “5551”, as well as the touch screen after saving the IP address exit.
109
AMX-FX3U net port series Programmable Controller User Manual of AMX Automation
Technology Co. , Ltd. . Dongguan


Appendix E, PLC version number view
    Register D8105 records the PLC version information, as shown in the following figure, after
converting the D8105 value to an unsigned decimal number, ten bits represent the main version of
the software version number, and one bit represents the subversion number of the software version
number.
110
